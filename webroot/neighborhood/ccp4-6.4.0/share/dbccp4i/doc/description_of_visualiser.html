<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=us-ascii">
<html>
<head><title>Description of version 1 db viewer</title></head>
<body>
<center>
<h1>Description of version 1 CCP4i database viewer</h1>
<p><em>December 20th 2006 </em> </p>
<p><em>Wanjuan Yang</em></p>
</center>
<h2>Overview </h2>
<p>
CCP4i Database viewer is a standalone client application of db handler. It can display the job history of a CCP4i project in graph view. Based on the fact that files output from a job could be the input for another job, the visualiser shows the flow of files between jobs, thus shows how the jobs are related to each other.  The visualiser provides tools to allow users to select part of the jobs which he/she is interested in to view. The jobs information are shown in the node label, bubble help box and the color of the nodes. </p>
<p>The following is the screenshot of the db viewer:</p>
<p><img src="demo.jpg"></p>
<h2>Usage of db visualier</h2>
<h3>Requirements of running db viewer</h3>
<p>Running viewer requires three components: </p>
<p>Viewer: This includes modules viewer.tcl, dotgraph.tcl,
dbClientAPI.tcl,dbxml.tcl. </p>
<p>DB handler: This includes modules dbccp4i.py, ccp4i.py, DBcommand.py, manager.py. </p>
<p>CCP4i project database: This is the project database database.def file
created from ccp4i. </p>
<p>Before running viewer.py, you must set up environment variable DBCCP4I_TOP
and CCP4I_TOP. To do this, run the set up file dbccp4i.setup and ccp4.setup.</p>
<p></P>
<p>To run the viewer, you could type:</p>
<p><b>wish viewer.tcl PROJECTNAME</b></p>
<p>The visualiser will load the given project. </p>
<p>Or you could simply type:</p>
<p><b> wish viewer.tcl</b></p>
<p>In this case, the visualiser will load the first project of the existing projects. </p>
<h2>Features of the db viewer</h2>
<h3>Loading project</h3>
<p>Existing projects are listed in the Project menu. By selecting one you can change directly to a new project and see the jobs displaying in the window.</p>
<h3>Selecting jobs to display</h3>
<p>The viewer provides tools to select jobs that user wish to view.
There are a couple ways that perform selection of jobs.
<ul>
<li>By left clicking the job node can select a job.
<li>By holding down Control whilst left clicking the job node can select multiple jobs.
<li>By right clicking the job node and click on &quot;Select all children&quot; will result in selection of later jobs(in terms of time when the job was performed) which have links direct or undirect to this job. 
Choosing &quot;Select all parents&quot; from the menu will result in the selection of previous jobs which have links direct or undirect to the job.
</p>
</ul>
<h3>Back &amp; Forward button</h3>
<p>User can use different selection tools mentioned above to select jobs to
view, each time when user click 'show selected jobs', the db viewer will
remember the selected jobs. User can use 'Back' &amp; 'Forward' button to step backwards or forwards to the selections.</p>
<h3>Filtering the jobs</h3>
<p>Filter can be applied on top of the selection of jobs. The
Filter menu has two different
filters: one is only show Finished jobs. In this case all failed jobs will be
filtered out. The other filter is only show linked jobs. All single jobs which
are not related to any other jobs will be filtered out. This two filters can
be applied seperately or at the same time. Note that the db viewer doesn't
remember the result of filtered jobs. So the 'Back' & 'Forward' button doesn't
apply for the filtered jobs. </p>
<h3>Bubble help for the jobs</h3>
<p>When the mouse point to the job node a bubble help will appear. It shows jobs title, date, input files, output files.</p> 
<h3>Color of the job nodes</h3>
<p>The job nodes are shown in different colors based on the status. The jobs
with 'FINISHED' status are shown in green color. 'FAILED' jobs are shown in
red. 'RUNNING' jobs are shown in yellow. </p>
<h3>Automatically updating the view when database changes</h3>
<p>The db viewer is listening to the db handler, if there is a broadcast
message telling there is a change in database (e.g. when the job status changes
from 'running' to 'finished'), the viewer will automatically
update the view.</p>
<h3>Display jobs in different views</h3>
<p>The appearance menu provides choices of background color of the window, line color of the arrows and the orientation of the view. </p>
<h3>Output the graph</h3>
<p>The 'File' menu 'Output graph' allows user to output current view in a
file in different formats, e.g. gif, ps, jpg, png etc.</p>
<h3>Output the xml</h3>
<p>The 'File' menu 'Output xml' allows user to output the jobs information in
current view to a xml file. 
file </p>
<p>Last Update: $Date: 2008/08/12 10:48:16 $ </p>
</body>
</html>