<!doctype html public "-//w3c//dtd html 3.2//en">
<html>
<head>
<title>CCP4i Documentation for Programmers: CreateLine  command</title>
<link rel="stylesheet" type="text/css" href="../ccp4idocs.css" title="CCP4i" />
<meta name="GENERATOR" content="Mozilla/3.0Gold (X11; I; IRIX 6.2 IP22) [Netscape]" />
</head>
<body>

<table border="0">
<tr><td rowspan="3" class="logopic"><img src="../images/weblogo175.gif" alt="CCP4 web logo" /></td>
<td class="logohead">CCP4i: Graphical User Interface</td></tr>
<tr><td class="logoprog">Documentation for Programmers</td></tr>
<tr><td class="logotitle">CreateLine</td></tr>
</table>
<br />
<table border="0">
<tr><td>
<a href="CreateLineTemplate.html" target="_INDEXMAIN">
<img border="0" class="navbutton" src="../images/3Dnexttr.gif" alt="next button" /></a>
<a href="CreateLabinLine.html" target="_INDEXMAIN">
<img border="0" class="navbutton" src="../images/3Dprevtr.gif" alt="previous button" /></a>
<a href="progframeset.html" target="_PROGRAMMERSDOCS">
<img border="0" class="navbutton" src="../images/3Dtoptr.gif" alt="top button" /></a>
</td></tr>
</table>

<h3><a name="name"></a>NAME</h3>

<p>CreateLine - create a line in an interface window</p>

<h3><a name="synopsis"></a>SYNOPSIS</h3>

<p><strong>CreateLine</strong> <em>line_id ?keywords?</em></p>

<p>Keywords:</p>

<blockquote>
<strong><a href="#label"
 target="_self">label</a></strong> <em>label_text</em><br />

<strong><a href="#widget"
 target="_self">widget</a></strong> <em>variable_name</em><br />

<strong><a href="#message"
 target="_self">message</a></strong> <em>message_text</em><br />

<strong><a href="#help"
 target="_self">help</a></strong> <em>help_target</em><br />

<strong><a href="#format"
 target="_self">format</a></strong> <em>format_mode format_layout</em><br />

<strong><a href="#toggle_display"
target="_self">toggle_display</a></strong> <em>controlVar status control_value_list</em><br />

<strong>bitmap_button</strong> <em>bitmap_name</em><br />

<strong>button</strong> <em>button_text</em>
</blockquote>

<h3><a name="description"></a>DESCRIPTION</h3>

<p>Create a line in the open task window folder (see
<a href="CreateTaskWindow.html" target="_INDEXMAIN"><em>CreateTaskWindow</em></a>
and
<a href="OpenFolder.html" target="_INDEXMAIN"><em>OpenFolder</em></a>) or
an open window (see
<a href="OpenWindow.html" target="_INDEXMAIN"><em>OpenWindow</em></a>) and return
the id of the line <em>line_id</em>. All remaining arguments are optional but take
the form of a keyword followed by one or more arguments (the number is
defined for each keyword). In addition, some keywords can have subkeywords
which always begin with the minus character (<em>e.g.</em> the <strong>-width</strong>
subkeyword to <strong>widget</strong>).</p>

<dl>
<dt><a name="label"></a><strong>label</strong> <em>label_text ?-italic?</em></dt>
<dd>Write text <em>label_text</em> to line. The <em>-italic</em> option, to use italic
text, should be used sparingly: probably only in a line which introduces several
subsequent lines, and can thus act as a title/help text.</dd>

<dt><a name="widget"></a>
<strong>widget</strong>&nbsp;<em>variable_name</em>&nbsp;?<strong>-oblig&nbsp;-width&nbsp;-expand&nbsp;-command</strong>&nbsp;<em>command_script</em>&nbsp;<strong>-toggleon</strong>?</dt>
<dd>Draw the <strong>widget</strong> (menu, entry field, button <em>etc.</em>)
appropriate for the data type of the parameter <em>variable_name</em>. The data type
must have been defined in the <em>taskname</em>.def file.</dd>

<dd>If the widget is an entry field, the following subkeywords are possible:
<dl>
<dt><strong>-oblig</strong></dt><dd>the parameter is obligatory - the field will
be highlighted in a contrasting colour until the user has entered appropriate values</dd>

<dt><strong>-width</strong></dt><dd>the width of the field (number of characters),
overriding the default for the data type</dd>

<dt><strong>-expand</strong></dt><dd>expand the field to fill the line</dd>

<dt><strong>-command</strong> <em>command_script</em></dt><dd>Provide a command script
(usually a call to a procedure), which is executed whenever the user changes
the value of the parameter</dd>
</dl>

If the widget is a logical (checkbutton), the followin subkeyword is possible:
<dl>
<dt><strong>-toggleon</strong></dt><dd>if the user changes the values of the
other parameters on the same line as the checkbutton, then it will automatically
turn the checkbutton `on'.</dd>
</dl>
</dd>

<dt><a name="message"></a><strong>message</strong> <em>message_text</em></dt>
<dd>Specify the text <em>message_text</em> which will appear in the message
bar whenever the user moves the cursor over any <strong>widget</strong> in the line
defined after this <strong>message</strong> keyword but before the next
<strong>message</strong> keyword.</dd>

<dt><a name="help"></a><strong>help</strong> <em>help_target</em></dt>
<dd>The user can access on-line help by clicking the right mouse button
on a widget. The help file is defined by the preceding <em>SetProgramHelpFile</em>
command. The <em>help_target</em> is the target within that file to go to
when the user clicks on any widget in the line following this <strong>help</strong>
keyword but before the next <strong>help</strong> keyword.</dd>

<dt><a name="format"></a><strong>format</strong> <em>format_mode format_layout</em></dt>
<dd>Specify the format of a line. Currently the only supported value of
<em>format_mode</em> is <strong>template</strong> which requires the name of the
<em>format_layout</em> to be the name of the template defined by the
<em>CreateLineTemplate</em> command.</dd>

<dt><a name="toggle_display"></a><strong>toggle_display</strong> <em>controlVar status
control_value_list</em></dt>
<dd>Whether the line is displayed, is dependent on the value of the parameter
called <em>controlVar</em>. If the value of <em>controlVar</em> is one of
the values in <em>control_value_list</em>, the line will be displayed
if <em>status</em> is <strong>open</strong> or hidden if <em>status</em> is
<strong>hide</strong>. The opposite status will be adopted if the value of
<em>control_var</em> is not one of those in the <em>control_value_list</em>.</dd>
</dl>

<h3><a name="hints"></a>HINTS</h3>

<p><strong>ERRORS</strong></p>

<p>This command is fairly tolerant of bad input (<em>e.g.</em> misspelled keywords)
but is unlikely to give you a meaningful warning message. It will be obvious
there is a problem when you look at what is displayed. My most common mistake
is failure to define the <em>variable_name</em> associated with the
<strong>widget</strong> keyword in the <em>taskname</em>.def file.</p>

<p><strong>MESSAGE TEXT</strong></p>

<p>For the benefit of users who are used to running a program without the
interface, the message text should include the name of the program keyword
that the parameter relates to. The message text is not helpful if it repeats
what is already stated in the labels.</p>

<p><strong>USING TOGGLE_DISPLAY</strong></p>

<p>It is a good thing to use <strong>toggle_display</strong> to hide any lines which
are definitely not relevant to the task the user is trying to perform.
Also, a line may take two or more different forms dependent on some parameter:
to implement this it is necessary to define two or more versions of the
line and hide the version(s) which are not required.</p>

<p>The control variable for <strong>toggle_display</strong> is usually a menu (I
have never used anything else). The control variable should usually either
be in the protocol section of the task window, or in the same folder and
above the line to be toggled.</p>

<p>It is also possible to have a line which changes form dependent on some
parameter within the line. For example (in CCP4i v1.0) in the DM task interface
the first line at the top of the window is dependent on the phase combination
scheme. Look for <tt>PHASE_COMB</tt> in the file $CCP4I_top/tasks/dm.tcl to
see how this works. Note that the parameter <tt>PHASE_COMB</tt> controls not
only the form of the line that it appears in, but also another line in the
first folder.</p>

<h3><a name="keywords"></a>KEYWORDS</h3>

</body>
</html>
