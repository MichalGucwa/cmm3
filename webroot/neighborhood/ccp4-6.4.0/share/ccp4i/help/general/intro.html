<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "DTD/xhtml1-transitional.dtd">
<html>
<head>
<title>CCP4 Interface: Introduction</title>
<link rel="stylesheet" type="text/css" href="../ccp4idocs.css" title="CCP4i" />
<link rev="made" href="mailto:mgwt@ysbl.york.ac.uk" />
<meta name="GENERATOR" content="Mozilla/3.0Gold (X11; I; IRIX 6.2 IP22) [Netscape]" />
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<meta name="AUTHOR" content="Maria and Liz" />
</head>
<body>

<table border="0">
<tr><td rowspan="2"><img src="../images/weblogo175.gif" alt="CCP4 web logo" /></td>
<td class="logohead">CCP4i: Graphical User Interface</td></tr>
<tr><td class="logotitle">Introduction</td></tr>
</table>
<br />
<table border="0">
<tr><td>
<a href="fileselect.html" target="_self">
<img class="navbutton" border="0" src="../images/3Dnexttr.gif" alt="next button" /></a>
<a href="../index.html" target="_top">
<img class="navbutton" border="0" src="../images/3Dtoptr.gif" alt="top button" /></a>
</td></tr>
</table>

<p><a href="#ccp4i_reference" target="_self">CCP4i Reference</a></p>
<dl>
<dt><a href="#getting_started" target="_self">Getting Started</a></dt>
<dd><a href="#documentation" target="_self">Documentation and Help</a></dd>
<dd><a href="#directories" target="_self">Directories and Project
Directory</a> for tidy file organisation.</dd>
<dd><a href="#defaults_files" target="_self">Saving Defaults</a></dd>
</dl>

<p><a href="#main_window" target="_self">The Main Window</a> </p>

<p><a href="#interface_organisation" target="_self">Modules and Tasks</a></p>

<dl>
<dt><a href="#task_window_format" target="_self">Task Window Format</a></dt>
<dd><a href="#file_selection_line" target="_self">File Selection</a></dd>
<dd><a href="#MTZ_column_selection" target="_self">MTZ&nbsp;Column Selection</a></dd>
<dd><a href="#extending_frames" target="_self">Extending Frames and Toggle Frames</a></dd>
<dd><a href="#cut_n_paste" target="_self">Cutting and Pasting into CCP4i Windows</a></dd>
</dl>

<p><a href="#data_validation" target="_self">Validating User Input</a> </p>

<p><a href="#saving_parameters" target="_self">Saving and Restoring Task
Parameters</a> </p>

<dl>
<dt><a href="#running_a_task" target="_self">Running a Task</a></dt>
<dd><a href="#progress" target="_self">Following Job Progress</a></dd>
</dl>

<p><a href="#mouse_buttons" target="_self">The Mouse Buttons and
Function Keys</a></p>
<p><a href="#naming_conventions" target="_self">Naming Conventions</a></p>
<p><a href="#note_on_using_netscape" target="_self">A Note on Using Netscape</a></p>

<h3><a name="ccp4i_reference"></a>CCP4i Reference</h3>

<p>The reference for CCP4i is:</p>
<blockquote>E. Potterton, P. Briggs, M. Turkenburg and E. Dodson<br />
<i>Acta Cryst.</i> (2003). D<b>59</b>, 1131-1137<br />
&quot;A graphical user interface to the <i>CCP</i>4 program suite&quot;</blockquote>

<h3><a name="getting_started"></a>Getting Started</h3>

<p>To run the Interface you must have the standard CCP4 program setup
- it will stop with a warning message if it can not find CCP4 programs
and data files! Then type:</p>

<dl>
<dt><strong>ccp4i</strong></dt>
<dd>which will bring up the <a href="#main_window" target="_self">Main Window</a> of
the Interface. Alternatively:</dd>

<dt><strong>ccp4i -h[elp]</strong></dt>
<dd>will list a short help text which indicates alternative ways of running
the Interface - including:

<dl>
<dt><strong>ccp4i -t[ask] <em>taskname</em></strong></dt>
<dd>which will run a cutdown version of the Interface to set up one CCP4
program or task (where the task might be one or more programs).</dd>

<dt><strong>ccp4i -v[iew] [<em>filename</em>] </strong></dt>
<dd>display a file using
<a href="fileviewer.html" target="_self">The FileViewer Utility</a>. This
utility uses the appropriate program to interpret the file contents (<em>e.g.</em>
MTZDMP is run to list the header of MTZ&nbsp;files). The file type is interpreted
from the file extension. If the file has a non-standard extension,
do not give its name on the command line - instead enter it in the
<a href="fileselect.html" target="_self">file selection window</a> which
also has a menu for you to specify the file type.</dd>

<dt><strong>ccp4i -g[raph] [<em>log_file</em>]</strong></dt>
<dd>display the graphs from a log file or a simple data file with columns
of data, using
<a href="loggraph.html" target="_self">The Loggraph Utility</a>.</dd>
</dl>
</dd>
</dl>

<h4><a name="documentation"></a>Documentation and Help</h4>

<p>There are various levels of documentation in and around the Interface:</p>
<ul>
<li><a name="full_documentation"></a>Full documentation - The full documentation can be read
starting from <a href="../index.html" target="_top">
Welcome to the CCP4 Task Interface</a>.</li>

<li><a name="help_button"></a>'Help' button - There is a <strong><tt>Help</tt></strong> button
at the top right of most Interface windows. Clicking in this brings up a Netscape window
with a help page describing that window.</li>

<li><a name="message_line_help"></a>'Message line help' - As you move the mouse about a window,
you will notice that when the cursor is over an entry widget (either a field you can type into, or a
menu or button), some explanation of that widget is flashed in <strong>the
message line</strong>, which is the gold-coloured bar at the top of the window. </li>

<li><a name="bubble_help"></a>'Bubble help' - this displays the same help text as
the 'message line help' above, however the text is shown in a <strong>bubble</strong>
which appears next to the widget in question after a short time-delay. This is in
addition to the message line, but can be turned off if the user finds it too distracting. </li>

<li><a name="right_mouse_button_help"></a>'Right mouse button help' - For more information on
a specific entry widget you can click on it
with <strong>the right mouse button</strong>. This will bring up a Netscape window
displaying help text for that window and positioned at the explanation
for that widget.</li>
</ul>

<h4><a name="directories"></a>Directories &amp; Project Directory</h4>

<p>The first time you run the Interface, the window which enables you
to set up directory aliases and define a project directory comes up automatically:<br />
<img src="../images/startwindow.gif" width="528"
alt="CCP4i first startup Directories&amp;ProjectDir window" />.<br />
Alternatively it can be accessed via the <strong><tt>Directories&amp;ProjectDir</tt></strong>
button near the top right of <a href="#main_window" target="_self">The Main Window</a>.</p>

<p>The CCP4 Interface is designed with the expectation that all data files
relating to one crystallographic project will be in one directory.
It is simple to override this but it may be helpful to organise all CCP4
work this way. You may have more than one project, and it is easy to switch
between projects inside the Interface.</p>

<p>In the <strong>Directories&amp;ProjectDir</strong> window,
enter one-word aliases and the full pathname for the directories you use
regularly. These directories can then be accessed quickly when selecting files via
a menu that lists your directory aliases and goes straight to the directory you
choose. The window allows distinction between two types of directories:</p>
<ul>
<li>those that contain everything to do with one project (<em>i.e.</em> the
Project directories), to be entered with the <strong><tt>Add project</tt></strong>
button. One of these directories should be selected as your current <strong>Project
directory</strong>. Use the pop-up menu to select from
a list of the defined project directory aliases.</li>
<li>those that contain any other information you may want to use regularly,
<em>e.g.</em> CCP4 example areas, which can be entered with the <strong><tt>Add
directory alias</tt></strong>. In many cases, these will be directories you
do not 'own' personally.</li>
</ul>

<p>The Interface will automatically create a subdirectory of your project
directory called
<a href="database.html#CCP4_DATABASE" target="_self">CCP4_DATABASE</a>.
This is where the Interface stores its database for the project.</p>

<h4><a name="defaults_files"></a>Saving Defaults</h4>

<p>In the user's home directory CCP4i creates a directory <strong>.CCP4</strong> which contains
subdirectories:</p>

<dl>
<dt><strong>unix</strong></dt><dd>contains defaults files for Unix &amp; Linux systems</dd>
<dt><strong>windows</strong></dt><dd>contains defaults files for Windows systems</dd>
<dt><strong>CCP4I_TOP</strong></dt><dd>contains a directory structure which mirrors the CCP4i distribution and
which can contain any file which will be used in preference to the distribution version</dd>
</dl>

<p>In the <strong>.CCP4</strong> directory a <strong>CCP4_session.log</strong> is created and
extended as the user runs CCP4i. This file contains information which might help with trouble
shooting. The contents can be viewed using the <strong>View Session Log</strong> option under the
<strong>System Administration</strong> menu (bottom right of the Main Window, in the
<a href="#database_options_menu"><strong>Database Options</strong> menu</a>).</p>

<p>The contents of the unix or windows directories:</p>

<dl>
<dt><strong>directories.def</strong></dt>
<dd>contains the information which is viewed in the
<strong>Directories&amp;ProjectDir</strong> window, <em>i.e.</em> the directory aliases and
current project</dd>
<dt><strong>configure.def</strong></dt>
<dd>contains your customisation of the configuration (<em>i.e.</em> the selection of batch queues,
printers, HTML browsers <em>etc.</em>) if you have changed these from your general site setup</dd>
<dt><strong>preferences.def</strong></dt>
<dd>contains the preferences set in the <a href="#preferences_button"><strong>Preferences</strong></a>
option (bottom right in the Main Window)</dd>
<dt><strong>loggraph.def</strong></dt>
<dd>created if user modifies the Loggraph appearances (see also <a href="loggraph.html">The Loggraph Utility</a>)</dd>
<dt><strong>status.def</strong></dt>
<dd>created when you exit the Interface, to store 'CURRENT MODULE', <em>i.e.</em> the module that you used last</dd>
</dl> 

<h5>Saving defaults - old style, old files</h5>

<p>Older versions of CCP4i used different ways of saving defaults. This may have left
various files in the user's home directory, <em>e.g.</em>
.CCP4_configure, .CCP4_directories, .CCP4_directories_old, .CCP4_preferences, .CCP4_session_log,
.CCP4I_session_log, .CCP4_status. When using version 1.2, these can all be removed.</p>

<h3><a name="main_window"></a>The Main Window</h3>

<p>Here is what the Main Window looks like (individual parts of the picture are clickable):</p>

<table bgcolor="#000000" >
<tr>
<td><img src="../images/mainwindow-10may05-width500-blurjoblist.png" alt="Main Window of CCP4 Interface"
border="0" usemap="#mapmw" width="500" /></td>
</tr>
</table>

<map name="mapmw" id="mapmw">
<area href="#message_line_help" alt="'Message line help' bar" shape="rect" coords="  0, 0,406, 12" />
<area href="#project_switch_button" alt="'Change Project' button" shape="rect" coords="  407, 0,472, 12" />
<area href="#help_button" alt="'Help' button" shape="rect" coords="473, 0,498, 12" />
<area href="#choose_module_menu_bar" alt="'Choose module' menu bar" shape="rect" coords="  0, 13,140, 25" />
<area href="#tasks_menu" alt="'Tasks menu'" shape="rect" coords="  0, 26,125,180" />
<area href="#job_list" alt="'Job list'" shape="rect" coords="142, 14,367,167" />
<area href="#dir_proj_dir_button" alt="'Directories&amp;ProjectDir' button" shape="rect" coords="382, 14,498, 27" />
<area href="#view_any_file_button" alt="'View Any File' button" shape="rect" coords="382, 30,498,45" />
<area href="#view_files_from_job_menu_bar" alt="'View Files from Job' menu bar" shape="rect" coords="382, 46,482, 60" />
<area href="#search_sort__button" alt="'Search/Sort Database' button" shape="rect" coords="382, 61,482, 75" />
<area href="#delete_archive_files_button" alt="'Delete/Archive Files' button" shape="rect" coords="382, 76,482, 90" />
<area href="#kill_job_button" alt="'Kill Job' button" shape="rect" coords="382, 91,482,105" />
<area href="#rerun_job_button" alt="'ReRun Job' button" shape="rect" coords="382,106,482,121" />
<area href="#edit_job_data_menu_bar" alt="'Edit Job Data' menu bar" shape="rect" coords="382,122,482,135" />
<area href="#preferences_button" alt="'Preferences' button" shape="rect" coords="382,136,482,150" />
<area href="#system_administration_menu_bar" alt="'System Administration' menu bar" shape="rect" coords="382,151,482,165" />
<area href="#mail_ccp4_button" alt="'Mail CCP4' button" shape="rect" coords="382,166,450,180" />
<area href="#exit_button" alt="'Exit' button" shape="rect" coords="451,166,498,180" />
</map>

<p>The main window is composed of windows, menus and buttons. Apart from the gold-coloured
bar at the top, which is reserved for HELP (see
<a href="#documentation" target="_self">above</a>),
these are as follows (from top left to bottom right):</p>

<a name="choose_module_menu_bar"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong>Choose module</strong> menu bar - with a pop-up menu for the modules
of the Interface. Linked to each module are a set of tasks, displayed in
the:<br />

<a name="tasks_menu"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong>Tasks</strong> menu - scrollable list of tasks connected with a module.<br />

<a name="job_list"></a>
<img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong>Job List</strong> window - with a list of the jobs run via the Interface. Jobs
can be selected and deselected by clicking on the relevant line in the
job list. All jobs can be deselected by pressing
<a href="#mouse_buttons" target="_self">the F2 function key</a>.
This job list is the main Interface to
<a href="database.html" target="_self">The Database Utility</a>.<br />

<a name="dir_proj_dir_button"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong><tt>Directories&amp;ProjectDir</tt></strong>&nbsp;button - to choose
the directory for the current project, and other directories (see
<a href="#directories" target="_self">above</a>).<br />

<a name="project_switch_button"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong><tt>Change Projects</tt></strong>&nbsp;button - gives a menu of the
current list of existing projects. By selecting one you can change directly
to a new project and therefore see the list of jobs within that project.<br />

<a name="view_any_file_button"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong><tt>View Any File</tt></strong>&nbsp;button - to select and view any file using
<a href="fileviewer.html" target="_self">The FileViewer Utility</a>.<br />

<p><a name="database_options_menu"></a>To use the following <strong>Database Options</strong>,
you must first select a job from the job list. A more
<a href="database.html" target="_self">detailed description</a> of The Database
Utility can be found elsewhere.</p>

<ul>
<li><a name="view_files_from_job_menu_bar"></a><strong>View Files From Job</strong> menu bar -
with a pop-up menu to select the
<strong>log file</strong> or one of the <strong>input or output files</strong> from the job,
to be displayed with
<a href="fileviewer.html" target="_self">The FileViewer Utility</a>.
If the file is in HTML format, you will be given the option to <tt>View File in Netscape</tt>,
which will display the log file with links  to documentation and in-line graphs. Note that
there may be some delay as Netscape first loads the Java applet to display graphs.<br />
If the log file contains summary tags, you will have the option to display just the summary.<br />
The menu also has the option to:
<ul>
<li><strong><tt>View LogFile in Web Browser</tt></strong> - to view HTML format log file
directly in browser</li>
<li><strong><tt>View LogSummary in Web Browser</tt></strong> - to view only the summary from
a HTML format log file in browser</li>
<li><strong><tt>View Log Graphs</tt></strong> - to view the tables in the log file with
<a href="loggraph.html" target="_self">The Loggraph Utility</a>.</li>
<li><strong><tt>View Command Scripts</tt></strong> - to display the input to the CCP4
programs.</li>
</ul>
</li>

<li><a name="search_sort__button"></a><strong><tt>Search/Sort Database</tt></strong>&nbsp;button -
to perform a search on the information in the job database, or display
the joblist sorted on various criteria. A more
<a href="database.html#search_sort_db" target="_self">detailed description</a> can be found
elsewhere.</li>

<li><a name="delete_archive_files_button"></a><strong><tt>Delete/Archive Files</tt></strong>&nbsp;button -
to delete or archive the
output files from selected job(s).</li>

<li><a name="kill_job_button"></a><strong><tt>Kill Job</tt></strong>&nbsp;button - to kill the selected job (one job
only can be killed in one action). You will be asked to confirm, before the job is
actually killed.</li>

<li><a name="rerun_job_button"></a><strong><tt>ReRun Job</tt></strong>&nbsp;button - to rerun a selected job, with an
option to review and change parameters used in the previous run.</li>

<li><a name="edit_job_data_menu_bar"></a><strong>Edit Job Data</strong> menu bar -
with a pop-up menu. To edit any notebook data produced with CCP4 (or related) programs.
The menu has the options to:
<ul>
<li><strong><tt>Read/Edit Notebook</tt></strong></li>
<li><strong><tt>Edit Job Data</tt></strong></li>
<li><strong><tt>Enter Data for External Job</tt></strong></li>
</ul>
</li>


<li><a name="preferences_button"></a><strong><tt>Preferences</tt></strong>&nbsp;button - to change Interface defaults,
<em>e.g.</em> for where output files go. A more
<a href="preferences.html" target="_self">detailed description</a> can be found elsewhere.</li>

<li><a name="system_administration_menu_bar"></a><strong>System Administration</strong> menu bar -
with a pop-up menu. To assist with setting up and extending CCP4i. The menu has the options to:
<ul>
<li><strong><tt>View Session Log</tt></strong> - The Interface keeps
a log of the session (<em>e.g.</em> jobs run and files deleted) and error messages. This
option will display the session log.</li>
<li><strong><tt>Configure Interface</tt></strong> - This gives a window to define
utilities like printers and remote machines. They should have been set up when your CCP4i
was installed. See also
<a href="configure.html" target="_PROGRAMMERSDOCS">Configuration</a>.</li>
<li><strong><tt>Install New Tasks</tt></strong> - This gives a window to copy
new task definitions (from a <tt>Task source</tt>) into the current installation.
See also <a href="install.html" target="_PROGRAMMERSDOCS">Install New Task</a>.</li>
<li><strong><tt>Run Tests</tt></strong> - To aid program developers in rerunning test jobs.</li>
</ul>
</li>

</ul>
<a name="mail_ccp4_button"></a><img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong><tt>Mail CCP4</tt></strong> button - brings up a window to enter a message
(comments, questions, problems) to ccp4gui@dl.ac.uk. The message
will be mailed immediately when <strong><tt>SEND</tt></strong> is pressed.<br />

<img src="../images/bullettr.gif" alt="bullet" height="8" width="16" />
<strong><tt>Exit</tt></strong> button - to exit the Interface.<br />

<p>The main window can be resized to alter the size of the windows and
menus, which also have scroll bars.</p>

<h3><a name="interface_organisation"></a>Modules and Tasks</h3>

<p>The Interface will run most frequently used programs
from the CCP4 suite but is organised around the idea of <strong>tasks</strong>
rather than programs. Usually one task corresponds to one
program but sometimes more than one program may be required to perform
a task or a program may be used in different tasks. The tasks are grouped
into <strong>modules</strong> according to the stage in the crystallographic process
they are used in (<em>e.g.</em> Density Improvement and Refinement are two
separate modules) and three utility modules which contain tools which apply to
the three main types of data (<em>i.e.</em> Map &amp; Mask Utilities, Reflection Data
Utilities and Coordinate Utilities). There is also a <strong>Program List</strong>
'module' which has an alphabetic list of interfaced programs.</p>

<p>The name of the <strong>current open module</strong> is in the
<strong>Choose module</strong> menu bar on the upper left of the
main Interface window in a gold colour (the background colour of the
documentation you are now reading). To use the pop-up menu:</p>
<ul>
<li>Hold the left mouse button down over the name of the current open module.</li>
<li>Move and release the mouse button over the desired module to open.</li>
</ul>
<p>A scrollable list of tasks will appear beneath the name of the module. Click on the
task name to open the task window. Only one instance of each task window
can be open at a time but windows for different tasks can be open simultaneously.</p>

<p>Note that some tasks may be <strong>disabled</strong> - this is indicated by
the text on the button being "greyed out", by the fact that the button doesn't
function, and by the text "disabled" appended to the end of the task description.
Tasks are disabled in this fashion when explicit dependencies for the task (for
example the presence of certain programs) are not found.</p>

<p>More detailed information about the dependencies, and how to obtain
and install them, is given in the <a href="additional.html"
target="_self">Additional Programs</a> section. Alternatively if you wish
to launch the disabled task (for example to set up a run on a remote
system where the software is installed) then there is an option to do this
in the <a href="configure.html#disable_tasks">Configure Interface</a> window.
The tasks will no longer be greyed out but will be displayed in italic font
to indicate that the full functionality is not available.</p>

<h3><a name="task_window_format"></a>Task Window Format</h3>

<p>All of the task windows have a common format.</p>

<p>Each task window is divided horizontally into sections called <strong>folders</strong>.
In general, the folders may be open so that you can see the contents, or
closed so that only the title line is visible. Folder status is indicated
by the small square button on the right hand side; it can be toggled
open and closed by clicking anywhere on the title line.</p>

<p>The top two folders of a task window can not be closed, and are always:</p>

<dl>
<dt><a name="protocol_folder"></a>The <strong>Protocol</strong> folder</dt>

<dd>First check the options in the protocol folder as they represent the
key decisions; dependent on this input the defaults and options available
in the rest of the task window may change.</dd>

<dt><a name="files_folder"></a>The <strong>Files</strong> folder</dt>

<dd>This folder is for specifying both input and output files, and the
column data in the MTZ&nbsp;files.</dd>

<dd>The file selection and MTZ column selection options have a common format
in all the task windows. The input file selection is above the output file
selection. After selecting the input file a reasonable name is automatically
derived for the output file. This output name can be changed if desired.</dd>

<dd>Where appropriate an input file is read automatically and data are
extracted to provide reasonable defaults for some options and to simplify
selection of MTZ column data. You may notice a pause after entering a file
name while the file header is read.</dd>
</dl>

<p>The number and contents of the other folders will be dependent on the
task, and folders which contain less commonly used options will be closed
by default.</p>

<p>At the bottom of the task window are options for saving and restoring
parameters (<strong><tt><a href="#saving_parameters"
target="_self">Save or Restore</a></tt></strong>) and for running the task
(<strong><tt><a href="#running_a_task" target="_self">Run</a></tt></strong>).</p>

<h5><a name="file_selection_line"></a>The file selection line:</h5>

<p>The Interface makes assumptions about where input files will be (in the
Project directory) and where output files should go (either the Project directory or
TEMPORARY for large or temporary files). The TEMPORARY&nbsp;directory
is the CCP4 program scratch directory usually defined by the $CCP4_SCR
environment variable, but this can be changed in the
<strong>Directories&amp;ProjectDir</strong> window.<br />
These defaults/assumptions can be overridden using the following widgets:</p>

<dl>
<dt><strong>Default directory</strong> menu</dt><dd>The pop-up menu has a list of the defined
directory aliases and the options of the CURRENT directory and the TEMPORARY&nbsp;directory.</dd>
<dt><strong>File name entry</strong></dt><dd>You can type in the name of the file. If no directory
path is specified, the file is expected to be in the default directory. If you select a
file which is not in the default directory, then its full path name will be displayed.
Otherwise only the file name, without the path, is displayed.</dd>
<dt><a name="browse_button"></a><strong>Browse</strong> button</dt><dd>Click this to open
a File Selection window to select the file. A <a href="fileselect.html"
target="_self">detailed description</a> of File Selection can be found elsewhere.</dd>
<dt><a name="view_button"></a><strong>View</strong> button</dt><dd>When this is clicked,
the selected file is listed to a separate viewing window by
<a href="fileviewer.html" target="_self">The FileViewer Utility</a>.</dd>
</dl>

<p>In addition to (and as an alternative to) these widgets, you can use the
<a href="fileselect.html#file_name_completion" target="_self">File Name Completion</a>
feature. Typing the initial letters of a file name (wildcards accepted) and pressing the
&lt;Return&gt;/&lt;Enter&gt; button will bring up a window listing all files whose names begin with those
letters, one of which can be selected.</p>

<h5><a name="MTZ_column_selection"></a>The MTZ column selection line:</h5>

<p>Each column selection line will allow selection of one or two sets of
column data. Where there is the option to select two sets, the second set
is a Sigma or Weight for the first set.</p>

<p>Input column data has a default selection of &quot;Unassigned&quot;
until the input file is selected. Then the column data is read automatically
from the file, and a pop-up menu, listing the names of all column data
of suitable data type, is created. At the bottom of the menu list is a
<strong><tt>List All Labels</tt></strong> option which will list all the column labels
(it may be necessary to use this if your columns do not have correct types).</p>

<p>Sigma or Weight column data in an MTZ file are assumed to be associated
with the preceding data column. Where there is no such data in the MTZ
file, an &quot;Unassigned&quot; option will appear in the menu. When you
change the F or Phi column selection, the Sigma or Weight selection
will be updated automatically.</p>

<p>Most programs do not have fixed requirements on column data input. The
Interface usually has options in the Protocol folder for you to specify
what you are trying to do and it will then provide the fields to enter
the necessary column labels. Usually the first item on the column label
line is compulsory but the Sigma or Weight may be optional and can be left
as a blank or as &quot;Unassigned&quot;.</p>

<h4><a name="extending_frames"></a>Extending Frames and Toggle Frames</h4>

<p>To understand what these are, look at examples:</p>
<ul>
<li>The CAD interface has an extending frame in the <strong>Files</strong>
folder to allow the user to enter the names of one or more input files.</li>
<li>The Refmac interface uses toggle frames to define the domains in rigid
body refinement. To see these, bring up the Refmac task window and change
the refinement mode (in the <strong>Protocol</strong> folder) to 'rigid body
refinement'. Now look down the window to the 'Rigid Domains Definition'
folder.</li>
</ul>

<p>Both extending frames and toggle frames have two control buttons underneath
them. The button on the right, which has a context-dependent label, allows
the user to open an extra frame beneath those which might already be open.
<a name="edit_list"></a>The button on the left is a menubutton
<tt>Edit List</tt> with access to some simple editing functionality to delete
and copy frames. There are options to:</p>
<dl>
<dt><tt>Delete last item</tt></dt><dd>Self-explanatory</dd>
<dt><tt>Delete selected item</tt></dt><dd>Upon selecting this option, the
user is advised to &quot;Use right mouse button to click on a widget in the
line to delete&quot; (see Message Line Help bar)</dd>
<dt><tt>Copy selected item</tt></dt>
<dd>Similarly to the second option, the user is advised to use the right mouse
button to select a line, which can then be copied directly below ANY line
by clicking the right mouse button in any field on the desired line.</dd>
<dd>In addition, external information can be copied using the SHIFT key plus
the right mouse button, as described <a href="#cut_n_paste"
target="_self">below</a>.</dd>
</dl>

<p>Extending frames are usually just
single line frames but can have more than one line. Toggle frames are
usually multi-line frames which also have a title line with a toggle button
which controls the display of the frame contents. Note that closing a frame
does not make the contents 'go away' or switch them off!</p>

<h4><a name="cut_n_paste"></a>Cutting and Pasting into CCP4i Windows</h4>

<p>The standard facility of cutting a selection by holding down the left
mouse button as you drag the cursor over the required text and pasting by
clicking the middle mouse button while the cursor is in the target field,
works throughout the Interface. All of the selected text will be put into
the target field.</p>

<p>Cut and paste is often most useful for copying data such as coordinates
which appear in the Interface as three separate fields. Using the
conventional cut and paste to select the x,y and z coordinates and then
pasting into the field for the x-coordinate would put all of the data in
the x-coordinate field. To do this successfully, paste by holding down the
SHIFT key and click with the right mouse button in the x-coordinate field.
The input string will be split into words and the first word placed in the
target field and the following words placed in the entry widgets to the
right of the target field. If there is already data in any of these fields,
it will be overwritten. If there are more words input than there are entry
fields in the line, then the extra input data will be ignored.</p>

<p>It is sometimes useful to paste in several lines of data at a time -
for example coordinates for several heavy atoms. This can be done if the
target fields are part of an extending frame, <em>i.e.</em> if they appear in
the Interface with the buttons <tt>Edit list</tt> and <tt>Add 'whatever'</tt>
beneath them. The input text must be split into separate lines with one
input line for each line in the Interface window. The first line of input
text will be split into words and the first word placed in the target field
that the user clicked; the following words will be placed in the following
fields of the same line. The next line of input will be placed in the next
line on the interface (if there is not a line there then one will be opened)
with the first word entered in the field underneath the one clicked, and so
on. Note that if the interface line has fields for extra data on the line
either before or after the fields that you want to fill (<em>e.g.</em> atom
types and Bfactors on the same line as coordinates), then the pasting option
should handle this correctly.</p>

<p>Sometimes the input text might include extra words on the line which you
do not want to go into the interface. To handle this, the Interface will
display the <strong>Paste</strong> window when you try to paste multi-line
text with the shift-right-mouse-button option. This window will list the
input text and has options to skip input at the beginning and/or end of each
input line.</p>

<p>Beware if the text you are copying from has very long lines which wrap
round. When you select this text, the wrap round text will be considered to
be on a new line.</p>

<!--Maria - I think a quick example might be useful here....-->

<h3><a name="data_validation"></a>Validating User Input</h3>

<p>Entry fields which MUST have some user input for the task to run are
indicated in a contrast colour (the gold background colour of the documentation
you are now reading) which persists until you have entered something appropriate.
Any field will adopt the contrast colour if your input is inappropriate.
The Interface checks your input either when you press the &lt;Return&gt;&nbsp;key
with the cursor in the entry field or when you move the cursor out of the
entry field. Currently the checking is:</p>

<ul>
<li>real and integer numbers are input where appropriate</li>
<li>input files exist</li>
<li>output files do not already exist</li>
<li>space group names or numbers are one of those in <em>symop.lib</em></li>
</ul>

<h3><a name="saving_parameters"></a>Saving and Restoring Task Parameters</h3>

<p>At the bottom of task windows is the option to <strong><tt>Save or Restore</tt></strong>
the parameters set up with the task interface. This provides a means to
save your parameters which is supplementary to the Database - when a job
is run, the Database automatically saves the parameters which can be accessed again via the
<a href="database.html#rerun_job" target="_self">
<strong><tt>ReRun Job</tt></strong></a> button.</p>

<p>The Interface convention is for files with lists of parameter values
to have the extension <strong>.def</strong> and to have a simple common format. For
example the initial parameters of any task interface are defined in files
called <strong>$CCP4I_top/tasks<em>/taskname</em>.def.</strong></p>

<p>The Interface keeps the contents of the task window for the duration of the
present Interface session, or until you change them manually.</p>

<table border="1">
<tr><th colspan="2"><tt>Save or Restore</tt> option</th><th>description</th></tr>
<tr><td colspan="3"><strong><tt>Save to File</tt></strong></td></tr>
<tr><td>&gt;</td>
<td><strong><tt>User's Defaults Directory</tt></strong></td>
<td>The parameters will be saved to a file <strong>$HOME/.CCP4/CCP4I_TOP/tasks/<em>taskname</em>.def</strong>.
Whenever you run this task, the parameters will be taken from
this file unless you also set a project default file which will take precedence.<br />
<a name="save_warning"></a><strong><em>BEWARE:</em></strong> Use this option with discretion or
you could find your version of the Interface always coming up with the 'wrong' parameters. It may,
however, be useful for tasks with a lot of input that you will run repeatedly. You can unset the
defaults with the <a href="#unset_project_defaults" target="_self"><strong><tt>Unset
Project Defaults</tt></strong></a> option.</td>
</tr>
<tr><td>&gt;</td>
<td><strong><tt>Current Project Default</tt></strong></td>
<td>The parameters will
be saved to a file in the current project database subdirectory called
<strong>$<em>Project</em>/CCP4_DATABASE/<em>taskname</em>.def</strong>
where <strong><em>taskname</em></strong> is the name of the task. Whenever you run
that task interface within the same Project, this file will be used
to initialise the parameters in the Interface. Heed the <a href="#save_warning">warning above</a>.</td></tr>
<tr><td>&gt;</td>
<td><strong><tt>Select File Name</tt></strong></td>
<td>You will have to enter the name of the file to save parameters to. You will
also need to explicitly <strong>Restore</strong> the parameters from this file.</td></tr>
<tr><td colspan="3"><strong><tt>Restore from File</tt></strong></td></tr>
<tr><td>&gt;</td>
<td><strong><tt>User's Defaults Directory</tt></strong></td>
<td>Restore from file <strong>$HOME/.CCP4/CCP4I_TOP/tasks/<em>taskname</em>.def</strong>
if the file exists.</td></tr>
<tr><td>&gt;</td>
<td><strong><tt>Current Project Default</tt></strong></td>
<td>Restore <strong><em>taskname</em>.def</strong> from the
<strong>$<em>Project</em>/CCP4_DATABASE</strong> directory.</td></tr>
<tr><td>&gt;</td>
<td><strong><tt>Select File Name</tt></strong></td>
<td>Select any previously saved <strong>.def</strong> file from
a chosen directory.</td></tr>
<tr><td>&gt;</td>
<td><strong><tt>Select Job Number</tt></strong></td>
<td>The Interface saves a <strong>.def</strong> file for every job that has run
successfully. Select a job number (see
<a href="#main_window" target="_self">the Job List window</a>) and
the <strong>.def</strong> file saved by the Database for that job will be read.</td></tr>
<tr><td colspan="2"><strong><tt>Restore Default Parameters</tt></strong></td>
<td>Clear all fields and restore default values.</td></tr>
<tr><td colspan="2"><a name="unset_project_defaults"></a><strong><tt>Unset
Project Defaults..</tt></strong></td>
<td>If the current contents of a default <strong><em>taskname</em>.def</strong>
file are no longer valid, you can unset them with this option. A small window
will come up, pointing out the current project default file, in which you can choose
to delete the <strong>.def</strong> file or to save it to another filename.</td></tr>
</table>

<h3><a name="running_a_task"></a>Running a Task</h3>

<p>When all parameters are set to your satisfaction, use the <strong><tt>Run</tt></strong>
button at the bottom left of the task window. There are three run modes:
</p>

<dl>
<dt><strong><tt>Run Now</tt></strong></dt>

<dd>The task is run 'in background' - you can continue using the Interface
while the job is running.</dd>

<dt><strong><tt>Run&amp;View Com File</tt></strong></dt>

<dd>To display the command line and command file for all CCP4 programs
that are run. You can edit the command file(s). This is a useful means
to enter unusual options or check the Interface has produced the command
input you expected.</dd>

<dt><strong><tt>Run Remote/Batch/Later</tt></strong></dt>

<dd>To run a script on a remote machine (using the Unix system <em>rsh</em>
command, with a preset choice of machines), and/or to start at a later time (using
the system <em>at</em> command). And, if this is supported by your local system,
to submit the job to a batch queue (with a preset choice of queues and the possibility
to use specific batch options).</dd>
<dd>This <tt>Run</tt> option may be aborted at any time using the <tt>Abort</tt> button
in the <tt>Run Remotely/...</tt> window.</dd>
<dd>There is an option to <tt>View and Edit the Com File</tt> when the job is run remotely. This
works like the same option when running programs locally, but <em>beware</em>: it probably is not
appropriate when running a job in a batch queue.</dd>

<!--<dt><strong><tt>Append to Script</tt></strong></dt>

<dd>which allows chaining of tasks <em>i.e.</em> building up one script which runs
two or more tasks.</dd>-->
</dl>

<p>A more <a href="runjob.html" target="_self">detailed description</a>
of how to run jobs can be found elsewhere.</p>

<h4><a name="progress"></a>Following Job Progress</h4>

<p>As soon as a job is set running, an entry for it will appear in the
Job List, indicating the number of the job, day and time, STATUS, and task(s)
of the job. The status information is updated as the job proceeds and the
possible values are:</p>

<table border="0">
<tr><td><strong>ON_HOLD</strong></td><td>The script has been created but
not run.</td></tr>
<tr><td><strong>STARTING</strong></td><td>The Interface is writing the script to
run the job.</td></tr>
<tr><td><strong>RUNNING</strong></td><td>The job is running.</td></tr>
<tr><td><a name="job_error"></a><strong>ERROR</strong></td><td>The job failed
due to an error in the script (please report this to the
<a href="mailto:ccp4gui@dl.ac.uk">Interface developers</a>).</td></tr>
<tr><td><strong>FINISHED</strong></td><td>The job has finished.</td></tr>
<tr><td><strong>KILLED</strong></td><td>You have killed the job.</td></tr>
<tr><td><strong>FAILED</strong></td><td>A CCP4 program failed. Look at
the log file first.</td></tr>
<tr><td><strong>REPORTED</strong></td><td>This job was run external to the
Interface. Information entered through
<a href="database.html#edit_enter_external_data" target="_self">Enter Data for
External Job</a> in the Database Menu.</td></tr>
<tr><td><strong>REMOTE</strong></td><td>The job is running remotely
(or may be waiting to run). Note that there may be a short delay between the job
completing and it being reported as FINISHED.</td></tr>
<!--<tr><td><strong>CHAINING</strong></td><td>You have started writing a
script using the <strong><tt>Run</tt></strong> option
<strong><tt>Append to Script</tt></strong> but have not yet run the script.</td></tr>-->
</table>

<p>The log file can be viewed using <strong><tt>View Files from Job</tt></strong>
from the Database menu and selecting <strong><tt>View Log File</tt></strong>. The
display will be updated as the log file is written out.</p>

<h3><a name="mouse_buttons"></a>The Mouse Buttons and Function Keys</h3>

<p>The <strong>left mouse button</strong> is used to click options in the Interface.</p>

<p>The <strong>right mouse button</strong> will bring up appropriate documentation,
in the browser, of a field (could be a menu or a button, too) when the
focus is in it.<br />
The <strong>right mouse button</strong> is also used to select a line in a list when you are
using the <a href="#edit_list" target="_self">Edit List</a> option.<br />
The <strong>Shift-right-mouse</strong> can be used to paste selected data into multiple fields.
<!-- (needs a link!)-->
</p>

<p>The <strong>F2</strong> function key will <em>de</em>select all jobs from the Job List.</p>

<h3><a name="naming_conventions"></a>Naming Conventions</h3>

<p>Unix and CCP4 conventions for naming (sub)directories:</p>
<dl>
<dt>$CCP4I_TOP</dt><dd>The directory which contains the Interface executable(check with
&quot;printenv CCP4I_TOP&quot;).</dd>
<dt>$CCP4_SCR</dt><dd>The directory which CCP4 programs use to store temporary files.
The Interface has a default alias &quot;TEMPORARY&quot; to this directory, but this
may not be optimal for your setup.</dd>
</dl>

<h3><a name="note_on_using_netscape"></a>A Note on Using Netscape</h3>

<p>There have been a few problems with running Netscape (we are trying to fix them but they are easy
to cope with if you know what is happening).</p>

<p><strong>Netscape Does not Start</strong><br />
If you do not already have Netscape running then it should start, but if this does not happen
you may need to start Netscape outside CCP4i.</p>

<p><strong>The Mail Window is Foregrounded</strong><br />
When you click on <tt>Help</tt> a Netscape window with the appropriate help text should be
foregrounded but sometimes the Mail window appears instead. You will have to find the right
Netscape window.</p>

<table border="0" width="100%">
<tr><td>
<a href="fileselect.html" target="_self">
<img border="0" class="navbutton" src="../images/3Dnexttr.gif" alt="next button" /></a>
<a href="../index.html" target="_top">
<img border="0" class="navbutton" src="../images/3Dtoptr.gif" alt="top button" /></a>
</td><td align="right"><a href="http://validator.w3.org/" target="_EXTERNAL">Valid XHTML 1.0!</a>
<a href="http://jigsaw.w3.org/css-validator/" target="_EXTERNAL">Valid CSS!</a></td></tr>
</table>

</body>
</html>
