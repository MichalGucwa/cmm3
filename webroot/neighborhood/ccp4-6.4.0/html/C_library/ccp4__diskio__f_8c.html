<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ccp4_diskio_f.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ccp4_diskio_f.c File Reference</h1><code>#include &lt;string.h&gt;</code><br>
<code>#include "<a class="el" href="ccp4__utils_8h-source.html">ccp4_utils.h</a>"</code><br>
<code>#include "<a class="el" href="ccp4__errno_8h-source.html">ccp4_errno.h</a>"</code><br>
<code>#include "<a class="el" href="ccp4__fortran_8h-source.html">ccp4_fortran.h</a>"</code><br>
<code>#include "ccp4_file_err.h"</code><br>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Compounds</h2></td></tr>
<tr><td nowrap align=right valign=top>struct &nbsp;</td><td valign=bottom><b>_CCP4IObj</b></td></tr>
<tr><td colspan=2><br><h2>Typedefs</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef _CCP4IObj&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a1">CCP4IObj</a></td></tr>
<tr><td colspan=2><br><h2>Enumerations</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><b>FILE_KLASS</b> { <b>NONE</b>, 
<b>CCP4_FILE</b>, 
<b>CCP4_MAP</b>
 }</td></tr>
<tr><td colspan=2><br><h2>Functions</h2></td></tr>
<tr><td nowrap align=right valign=top><a name="a7" doxytag="ccp4_diskio_f.c::_get_channel"></a>
int&nbsp;</td><td valign=bottom><b>_get_channel</b> ()</td></tr>
<tr><td nowrap align=right valign=top><a name="a8" doxytag="ccp4_diskio_f.c::_iobj_init"></a>
<a class="el" href="ccp4__diskio__f_8c.html#a1">CCP4IObj</a> *&nbsp;</td><td valign=bottom><b>_iobj_init</b> ()</td></tr>
<tr><td nowrap align=right valign=top><a name="a9" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a>
&nbsp;</td><td valign=bottom><b>FORTRAN_SUBR</b> (QOPEN, qopen,(int *iunit, fpstr lognam, fpstr atbuta, int lognam_len, int atbuta_len),(int *iunit, fpstr lognam, fpstr atbuta),(int *iunit, fpstr lognam, int lognam_len, fpstr atbuta, int atbuta_len))</td></tr>
<tr><td nowrap align=right valign=top><a name="a10" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a>
&nbsp;</td><td valign=bottom><b>FORTRAN_SUBR</b> (QQOPEN, qqopen,(int *iunit, fpstr lognam, const int *istat, int lognam_len),(int *iunit, fpstr lognam, const int *istat),(int *iunit, fpstr lognam, int lognam_len, const int *istat))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a11">FORTRAN_SUBR</a> (COPEN, copen,(int *iunit, fpstr filename, int *istat, int filename_len),(int *iunit, fpstr filename, int *istat),(int *iunit, fpstr filename, int filename_len, int *istat))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a12">FORTRAN_SUBR</a> (QRARCH, qrarch,(int *iunit, int *ipos, int *ireslt),(int *iunit, int *ipos, int *ireslt),(int *iunit, int *ipos, int *ireslt))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a13">FORTRAN_SUBR</a> (QWARCH, qwarch,(int *iunit, int *ipos),(int *iunit, int *ipos),(int *iunit, int *ipos))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a14">FORTRAN_SUBR</a> (QCLOSE, qclose,(int *iunit),(int *iunit),(int *iunit))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a15">FORTRAN_SUBR</a> (QMODE, qmode,(int *iunit, int *mode, int *size),(int *iunit, int *mode, int *size),(int *iunit, int *mode, int *size))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a16">FORTRAN_SUBR</a> (QREAD, qread,(int *iunit, uint8 *buffer, int *nitems, int *result),(int *iunit, uint8 *buffer, int *nitems, int *result),(int *iunit, uint8 *buffer, int *nitems, int *result))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a17">FORTRAN_SUBR</a> (QREADC, qreadc,(int *iunit, fpstr buffer, int *result, int buffer_len),(int *iunit, fpstr buffer, int *result),(int *iunit, fpstr buffer, int buffer_len, int *result))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a18">FORTRAN_SUBR</a> (QWRITE, qwrite,(int *iunit, uint8 *buffer, int *nitems),(int *iunit, uint8 *buffer, int *nitems),(int *iunit, uint8 *buffer, int *nitems))</td></tr>
<tr><td nowrap align=right valign=top><a name="a19" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a>
&nbsp;</td><td valign=bottom><b>FORTRAN_SUBR</b> (QWRITC, qwritc,(int *iunit, fpstr buffer, int buffer_len),(int *iunit, fpstr buffer),(int *iunit, fpstr buffer, int buffer_len))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a20">FORTRAN_SUBR</a> (QSEEK, qseek,(int *iunit, int *irec, int *iel, int *lrecl),(int *iunit, int *irec, int *iel, int *lrecl),(int *iunit, int *irec, int *iel, int *lrecl))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a21">FORTRAN_SUBR</a> (QBACK, qback,(int *iunit, int *lrecl),(int *iunit, int *lrecl),(int *iunit, int *lrecl))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a22">FORTRAN_SUBR</a> (QQINQ, qqinq,(int *istrm, fpstr logname, fpstr filename, int *length, int logname_len, int filename_len),(int *istrm, fpstr logname, fpstr filename, int *length),(int *istrm, fpstr logname, int logname_len, fpstr filename, int filename_len, int *length))</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="ccp4__diskio__f_8c.html#a23">FORTRAN_SUBR</a> (QLOCATE, qlocate,(int *iunit, int *locate),(int *iunit, int *locate),(int *iunit, int *locate))</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
 FORTRAN API for file i/o. Charles Ballard and Martyn Winn
<p>
<hr><h2>Typedef Documentation</h2>
<a name="a1" doxytag="ccp4_diskio_f.c::CCP4IObj"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef struct _CCP4IObj CCP4IObj
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
_ioChannels: structure to hold files     </td>
  </tr>
</table>
<hr><h2>Function Documentation</h2>
<a name="a23" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QLOCATE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qlocate&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *locate)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *locate)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *locate)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qlocate: @iunit: @locate:
<p>
Returns the current position \meta{locate} in the diskio stream @iunit.     </td>
  </tr>
</table>
<a name="a22" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QQINQ&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qqinq&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *istrm, fpstr logname, fpstr filename, int *length, int logname_len, int filename_len)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *istrm, fpstr logname, fpstr filename, int *length)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *istrm, fpstr logname, int logname_len, fpstr filename, int filename_len, int *length)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qqinq: @istrm: @filnam: @length:
<p>
Returns the name @filnam and @length of the file (if any) open on diskio stream @istrm.     </td>
  </tr>
</table>
<a name="a21" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QBACK&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qback&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qback: @iunit: @lrecl:
<p>
Backspaces one record, of length @lrecl on diskio stream @iunit.     </td>
  </tr>
</table>
<a name="a20" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QSEEK&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qseek&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *irec, int *iel, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *irec, int *iel, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *irec, int *iel, int *lrecl)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qseek: @iunit: @irec: @iel: @lrecl:
<p>
Seeks to element @iel in record @irec in diskio stream  @iunit whose record length is @lrecl.     </td>
  </tr>
</table>
<a name="a18" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QWRITE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qwrite&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qwrite: @iunit: @buffer: @meta:
<p>
This write @nitems items from @buffer to qopen()  stream \meta{iunit} using the current mode.     </td>
  </tr>
</table>
<a name="a17" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QREADC&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qreadc&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr buffer, int *result, int buffer_len)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr buffer, int *result)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr buffer, int buffer_len, int *result)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qreadc:: @iunit: @buffer: @result:
<p>
Fills CHARACTER buffer in byte mode from diskio stream  @iunit previously opened by qopen() and returns  <dl compact><dt><b>
Returns: </b><dd>
which is 0 on success or -1 on EOF.  It aborts on an i/o failure.  Call it with a character substring if necessary to control the number of bytes read. </dl>    </td>
  </tr>
</table>
<a name="a16" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QREAD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qread&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems, int *result)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems, int *result)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, uint8 *buffer, int *nitems, int *result)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qread: @iunit: io channel @buffer: @nitems: number of items @result: return value
<p>
Reads @nitems in the current mode qmode() from diskio  stream @iunit previously opened by qopen() and  returns <dl compact><dt><b>
Returns: </b><dd>
which is %0 on success or %-1 at EOF.  It aborts on an i/o error.  Numbers written in a foreign format will be translated if necessary if  the stream is connected to an <a class="el" href="structMTZ.html">MTZ</a> or map file. </dl>    </td>
  </tr>
</table>
<a name="a15" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QMODE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qmode&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *mode, int *size)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *mode, int *size)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *mode, int *size)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qmode:  @iunit: io channel @mode: access mode @size: item size
<p>
Changes the diskio access mode for stream @iunit to  @mode. The resulting size in bytes of items for transfer is  returned as @size     </td>
  </tr>
</table>
<a name="a14" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QCLOSE&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qclose&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qclose: @iunit: io channel
<p>
Closes the file open on diskio stream iunit     </td>
  </tr>
</table>
<a name="a13" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QWARCH&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qwarch&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qwarch @iunit: io channel @ipos: position
<p>
This is the complement of qrarch, writing the native machine  architecture information machine stamp to diskio stream  iunit at word ipos. Currently called from mtzlib and maplib.
<p>
The machine stamp in mtstring is four nibbles in order, indicating  complex and real format (must both be the same), integer format and character format (currently irrelevant). The last two bytes of  mtstring are currently unused and always zero.
<p>
N.B.: leaves the stream positioned just after the machine stamp.     </td>
  </tr>
</table>
<a name="a12" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">QRARCH&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>qrarch&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos, int *ireslt)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos, int *ireslt)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, int *ipos, int *ireslt)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
qrarch:  @iunit: iochannel @ipos: position in file @ireslt: return value
<p>
For binary files with a well-determined structure in terms of  [[float]]s and [[int]]s we may want to set up the connected stream to  do transparent reading of files written on a machine with a different  architecture. This is currently the case for map files and  <a class="el" href="structMTZ.html">MTZ</a> files and this routine is called from mtzlib and maplib.
<p>
qrarch reads the machine stamp at word ipos  for the diskio file on stream iunit and sets up the appropriate  bit-twiddling for subsequent qreads on that stream. The  information read from the file is returned in \meta{ireslt} in the  form fileFT+16fileIT. If the stamp is zero  (as it would be for files written with a previous version of the  library) we assume the file is in native format and needs no  conversion in qread; in this case ireslt will be zero and  the caller can issue a warning. Iconvert and Fconvert are  used by qread to determine the type of conversion (if any) to be  applied to integers and reals.
<p>
Fudge:fudge Ian Tickle reports old VAX files which have a machine stamp which is byte-flipped from the correct VAX value,although it should always have been zero as far as I can see. To accommodate this, set the  logical NATIVEMTZ and the machine stamp won't be read for any  input files for which qrarch is called.
<p>
Extra feature: logical/environment variable CONVERT_FROM may be set  to one of BEIEEE, LEIEEE, VAX or CONVEXNATIVE to avoid  reading the machine stamp and assume the file is from the stipulated  archictecture for all input <a class="el" href="structMTZ.html">MTZ</a> and map files for which qrarch is called.
<p>
N.B.: leaves the stream positioned just after the machine stamp.     </td>
  </tr>
</table>
<a name="a11" doxytag="ccp4_diskio_f.c::FORTRAN_SUBR"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> FORTRAN_SUBR </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">COPEN&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>copen&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr filename, int *istat, int filename_len)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr filename, int *istat)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>(int *iunit, fpstr filename, int filename_len, int *istat)&nbsp;</td>
          <td class="mdname" nowrap>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Opens filename on io stream iunit. istat corresponds to the open mode.  <dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>iunit</em>&nbsp;</td><td>
iochannel number </td></tr>
<tr><td valign=top><em>filename</em>&nbsp;</td><td>
fortran character array giving filename </td></tr>
<tr><td valign=top><em>istat</em>&nbsp;</td><td>
file mode </td></tr>
</table>
</dl>    </td>
  </tr>
</table>

</body>
</html>
