<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ccp4_array.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ccp4_array.h</h1><a href="ccp4__array_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">     ccp4_array.h: header file for resizable array implementation. </font>
00003 <font class="comment">     Copyright (C) 2002  Kevin Cowtan</font>
00004 <font class="comment"></font>
00005 <font class="comment">     This code is distributed under the terms and conditions of the</font>
00006 <font class="comment">     CCP4 Program Suite Licence Agreement as a CCP4 Library.</font>
00007 <font class="comment">     A copy of the CCP4 licence can be obtained by writing to the</font>
00008 <font class="comment">     CCP4 Secretary, Daresbury Laboratory, Warrington WA4 4AD, UK.</font>
00009 <font class="comment">*/</font>
00010 
00016 <font class="comment">/*</font>
00017 <font class="comment">CCP4 resizable array implementation.</font>
00018 <font class="comment"></font>
00019 <font class="comment">This defines an object and methods which looks just like a simple C</font>
00020 <font class="comment">array, but can be resized at will without incurring excessive</font>
00021 <font class="comment">overheads.</font>
00022 <font class="comment"></font>
00023 <font class="comment">A pointer to the desired type is created. Array elements are accessed</font>
00024 <font class="comment">from this pointer as normal. Other operations depend on macros which</font>
00025 <font class="comment">extract the stored type from the type of the pointer.</font>
00026 <font class="comment"></font>
00027 <font class="comment">The array is managed with a header, which is positioned before the</font>
00028 <font class="comment">beginning of the array. The malloc'ed memory area starts at the</font>
00029 <font class="comment">beginning of this header. However the pointer to the header is not</font>
00030 <font class="comment">stored, but rather derived from the array pointer whenever it is</font>
00031 <font class="comment">required.</font>
00032 <font class="comment"></font>
00033 <font class="comment">Arrays have a size and a capacity. The size is the number of elements</font>
00034 <font class="comment">in use, and the capacity is the number of elements available before a</font>
00035 <font class="comment">new memory allocation is required. When new memory is required, an</font>
00036 <font class="comment">excess is reqested to allow the array to grow further before</font>
00037 <font class="comment">performing another malloc.</font>
00038 <font class="comment"></font>
00039 <font class="comment">If the precise amount of memory is known, the capacity can be</font>
00040 <font class="comment">controlled directly using the 'reserve' macro.</font>
00041 <font class="comment"></font>
00042 <font class="comment">Example: to handle an array of type mytype:</font>
00043 <font class="comment"></font>
00044 <font class="comment">\code</font>
00045 <font class="comment">  int i;</font>
00046 <font class="comment">  mytype x,y;</font>
00047 <font class="comment">  mytype *array;</font>
00048 <font class="comment"></font>
00049 <font class="comment">  ccp4array_new(array);</font>
00050 <font class="comment"></font>
00051 <font class="comment">  ccp4array_append_n(array, x, 3);</font>
00052 <font class="comment"></font>
00053 <font class="comment">  for ( i = 0; i &lt; 3; i++ ) y = array[i];</font>
00054 <font class="comment"></font>
00055 <font class="comment">  ccp4array_free(array);</font>
00056 <font class="comment">\endcode</font>
00057 <font class="comment">*/</font>
00058 
00059 <font class="preprocessor">#ifndef __CCP4_ARRAY_INC</font>
00060 <font class="preprocessor"></font><font class="preprocessor">#define __CCP4_ARRAY_INC</font>
00061 <font class="preprocessor"></font>
00062 <font class="preprocessor">#ifdef  __cplusplus</font>
00063 <font class="preprocessor"></font><font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00064 <font class="preprocessor">#endif</font>
00065 <font class="preprocessor"></font>
00066 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00067 <font class="preprocessor">#include &lt;string.h&gt;</font>
00068 <font class="keyword">static</font> <font class="keywordtype">char</font> rcsidha[] = <font class="stringliteral">"$Id$"</font>;
00069 
<a name="l00071"></a><a class="code" href="ccp4__array_8h.html#a14">00071</a> <font class="keyword">typedef</font> <font class="keyword">const</font> <font class="keywordtype">void</font> *<a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a>;
<a name="l00073"></a><a class="code" href="ccp4__array_8h.html#a15">00073</a> <font class="keyword">typedef</font> <font class="keywordtype">char</font> *<a class="code" href="ccp4__array_8h.html#a15">ccp4_byteptr</a>;
<a name="l00075"></a><a class="code" href="ccp4__array_8h.html#a16">00075</a> <font class="keyword">typedef</font> <font class="keywordtype">void</font> *<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a>;
00076 
<a name="l00078"></a><a class="code" href="structccp4array__base__.html">00078</a> <font class="keyword">typedef</font> <font class="keyword">struct </font><a class="code" href="structccp4array__base__.html">ccp4array_base_</a> {
00079   <font class="keywordtype">int</font> size, capacity;
00080 } <a class="code" href="structccp4array__base__.html">ccp4array_base</a>;
00081 
<a name="l00087"></a><a class="code" href="ccp4__array_8h.html#a0">00087</a> <font class="preprocessor">#define ccp4array_new(v) ccp4array_new_((ccp4_ptr*)(&amp;v))</font>
00088 <font class="preprocessor"></font>
<a name="l00095"></a><a class="code" href="ccp4__array_8h.html#a1">00095</a> <font class="preprocessor">#define ccp4array_new_size(v,s) ccp4array_new_size_((ccp4_ptr*)(&amp;v),s,sizeof(*v))</font>
00096 <font class="preprocessor"></font>
<a name="l00105"></a><a class="code" href="ccp4__array_8h.html#a2">00105</a> <font class="preprocessor">#define ccp4array_resize(v,s) ccp4array_resize_((ccp4_ptr*)(&amp;v),s,sizeof(*v))</font>
00106 <font class="preprocessor"></font>
<a name="l00115"></a><a class="code" href="ccp4__array_8h.html#a3">00115</a> <font class="preprocessor">#define ccp4array_reserve(v,s) ccp4array_reserve_((ccp4_ptr*)(&amp;v),s,sizeof(*v))</font>
00116 <font class="preprocessor"></font>
<a name="l00123"></a><a class="code" href="ccp4__array_8h.html#a4">00123</a> <font class="preprocessor">#define ccp4array_append(v,d) ccp4array_append_((ccp4_ptr*)(&amp;v),(ccp4_constptr)(&amp;d),sizeof(*v))</font>
00124 <font class="preprocessor"></font>
<a name="l00132"></a><a class="code" href="ccp4__array_8h.html#a5">00132</a> <font class="preprocessor">#define ccp4array_append_n(v,d,n) ccp4array_append_n_((ccp4_ptr*)(&amp;v),(ccp4_constptr)(&amp;d),n,sizeof(*v))</font>
00133 <font class="preprocessor"></font>
<a name="l00141"></a><a class="code" href="ccp4__array_8h.html#a6">00141</a> <font class="preprocessor">#define ccp4array_append_list(v,l,n) ccp4array_append_list_((ccp4_ptr*)(&amp;v),(ccp4_constptr)l,n,sizeof(*v))</font>
00142 <font class="preprocessor"></font>
<a name="l00150"></a><a class="code" href="ccp4__array_8h.html#a7">00150</a> <font class="preprocessor">#define ccp4array_insert(v,i,d) ccp4array_insert_((ccp4_ptr*)(&amp;v),i,(ccp4_constptr)(&amp;d),sizeof(*v))</font>
00151 <font class="preprocessor"></font>
<a name="l00158"></a><a class="code" href="ccp4__array_8h.html#a8">00158</a> <font class="preprocessor">#define ccp4array_delete_ordered(v,i) ccp4array_delete_ordered_((ccp4_ptr*)(&amp;v),i,sizeof(*v))</font>
00159 <font class="preprocessor"></font>
<a name="l00165"></a><a class="code" href="ccp4__array_8h.html#a9">00165</a> <font class="preprocessor">#define ccp4array_delete(v,i) ccp4array_delete_((ccp4_ptr*)(&amp;v),i,sizeof(*v))</font>
00166 <font class="preprocessor"></font>
<a name="l00171"></a><a class="code" href="ccp4__array_8h.html#a10">00171</a> <font class="preprocessor">#define ccp4array_delete_last(v) ccp4array_delete_last_((ccp4_ptr*)(&amp;v),sizeof(*v))</font>
00172 <font class="preprocessor"></font>
<a name="l00177"></a><a class="code" href="ccp4__array_8h.html#a11">00177</a> <font class="preprocessor">#define ccp4array_size(v) ccp4array_size_((ccp4_constptr*)(&amp;v))</font>
00178 <font class="preprocessor"></font>
<a name="l00183"></a><a class="code" href="ccp4__array_8h.html#a12">00183</a> <font class="preprocessor">#define ccp4array_free(v) ccp4array_free_((ccp4_ptr*)(&amp;v))</font>
00184 <font class="preprocessor"></font>
00188 <a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> <a class="code" href="ccp4__array_8h.html#a18">ccp4array_new_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p);
00192 <a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> <a class="code" href="ccp4__array_8h.html#a19">ccp4array_new_size_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> size, <font class="keyword">const</font> size_t reclen);
00196 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a20">ccp4array_resize_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> size, <font class="keyword">const</font> size_t reclen);
00200 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a21">ccp4array_reserve_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> size, <font class="keyword">const</font> size_t reclen);
00204 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a22">ccp4array_append_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a> data, <font class="keyword">const</font> size_t reclen);
00208 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a23">ccp4array_append_n_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a> data, <font class="keyword">const</font> <font class="keywordtype">int</font> n, <font class="keyword">const</font> size_t reclen);
00212 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a24">ccp4array_append_list_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a> data, <font class="keyword">const</font> <font class="keywordtype">int</font> n, <font class="keyword">const</font> size_t reclen);
00216 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a25">ccp4array_insert_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> i, <a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a> data, <font class="keyword">const</font> size_t reclen);
00220 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a26">ccp4array_delete_ordered_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> i, <font class="keyword">const</font> size_t reclen);
00224 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a27">ccp4array_delete_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> <font class="keywordtype">int</font> i, <font class="keyword">const</font> size_t reclen);
00228 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a28">ccp4array_delete_last_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p, <font class="keyword">const</font> size_t reclen);
00232 <font class="keywordtype">int</font> <a class="code" href="ccp4__array_8h.html#a29">ccp4array_size_</a>(<a class="code" href="ccp4__array_8h.html#a14">ccp4_constptr</a> *p);
00236 <font class="keywordtype">void</font> <a class="code" href="ccp4__array_8h.html#a30">ccp4array_free_</a>(<a class="code" href="ccp4__array_8h.html#a16">ccp4_ptr</a> *p);
00237 
00238 <font class="preprocessor">#ifdef __cplusplus</font>
00239 <font class="preprocessor"></font>} 
00240 <font class="preprocessor">#endif</font>
00241 <font class="preprocessor"></font>
00242 <font class="preprocessor">#endif </font><font class="comment">/* __CCP4_ARRAY_INC */</font>
</pre></div>
</body>
</html>
