<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ccp4_parser.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ccp4_parser.h</h1><a href="ccp4__parser_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/*</font>
00002 <font class="comment">     ccp4_parser.h: Headers for functions to read in and "parse" CCP4 keyworded input.</font>
00003 <font class="comment">     Copyright (C) 2001  CCLRC, Peter Briggs</font>
00004 <font class="comment"></font>
00005 <font class="comment">     This code is distributed under the terms and conditions of the</font>
00006 <font class="comment">     CCP4 Program Suite Licence Agreement as a CCP4 Library.</font>
00007 <font class="comment">     A copy of the CCP4 licence can be obtained by writing to the</font>
00008 <font class="comment">     CCP4 Secretary, Daresbury Laboratory, Warrington WA4 4AD, UK.</font>
00009 <font class="comment">*/</font>
00010 
00090 <font class="comment">/*------------------------------------------------------------------*/</font>
00091 
00092 <font class="comment">/* Macro definitions */</font>
00093 
00094 <font class="comment">/*------------------------------------------------------------------*/</font>
00095 
00096 <font class="preprocessor">#ifndef __CCP4_Parser__</font>
00097 <font class="preprocessor"></font><font class="preprocessor">#define __CCP4_Parser__</font>
00098 <font class="preprocessor"></font>
00099 <font class="keyword">static</font> <font class="keywordtype">char</font> rcsidhhh[] = <font class="stringliteral">"$Id$"</font>;
00100 
00101 <font class="comment">/* note order: these must be outside CCP4 namespace */</font>
00102 <font class="preprocessor">#include &lt;stdio.h&gt;</font>
00103 <font class="preprocessor">#include"<a class="code" href="ccp4__utils_8h.html">ccp4_utils.h</a>"</font>
00104 <font class="preprocessor">#include"<a class="code" href="ccp4__spg_8h.html">ccp4_spg.h</a>"</font>
00105 
00106 <font class="comment">/* Macro to make C functions callable from C++ */</font>
00107 <font class="preprocessor">#ifdef  __cplusplus</font>
00108 <font class="preprocessor"></font><font class="keyword">namespace </font>CCP4 {
00109 <font class="keyword">extern</font> <font class="stringliteral">"C"</font> {
00110 <font class="keyword">typedef</font> CSym::ccp4_symop ccp4_symop;
00111 <font class="preprocessor">#endif</font>
00112 <font class="preprocessor"></font>
00113 <font class="comment">/*------------------------------------------------------------------*/</font>
00114 
00115 <font class="comment">/* Parser String Sizes */</font>
00116 
00117 <font class="comment">/*------------------------------------------------------------------*/</font>
00118 
00119 <font class="preprocessor">#define CCP4_PARSER_MAXLINELENGTH     200</font>
00120 <font class="preprocessor"></font><font class="preprocessor">#define CCP4_PARSER_MAXFILENAMELENGTH 200</font>
00121 <font class="preprocessor"></font>
00122 <font class="comment">/*------------------------------------------------------------------*/</font>
00123 
00124 <font class="comment">/* Structures and typedefs */</font>
00125 
00126 <font class="comment">/*------------------------------------------------------------------*/</font>
00127 
00128 <font class="comment">/* CCP4 Parser token</font>
00129 <font class="comment">   Construct to hold the information about a single token */</font>
00130 
00131 <font class="keyword">typedef</font> <font class="keyword">struct </font>{
00132   <font class="keywordtype">char</font>   *fullstring;   <font class="comment">/* Full string containing all of token */</font>
00133   <font class="keywordtype">char</font>   word[5];       <font class="comment">/* First four characters of token */</font>
00134   <font class="keywordtype">double</font> value;         <font class="comment">/* Equivalent numerical value */</font>
00135   <font class="keywordtype">int</font>    isstring;      <font class="comment">/* Flag: true if token is character string */</font>
00136   <font class="keywordtype">int</font>    strlength;     <font class="comment">/* Number of characters in whole token (strings only) */</font>
00137   <font class="keywordtype">int</font>    isnumber;      <font class="comment">/* Flag: true if token is number */</font>
00138   <font class="keywordtype">int</font>    intdigits;     <font class="comment">/* Number of 'digits' preceeding the decimal point</font>
00139 <font class="comment">                           (numbers only) */</font>
00140   <font class="keywordtype">int</font>    frcdigits;     <font class="comment">/* Number of 'digits' after the decimal point (numbers</font>
00141 <font class="comment">                           only) */</font>
00142   <font class="keywordtype">int</font>    isquoted;      <font class="comment">/* Flag: true if token is contained in quotes */</font>
00143   <font class="keywordtype">int</font>    isnull;        <font class="comment">/* Flag: true if token is null field */</font>
00144   <font class="keywordtype">int</font>    ibeg,iend;     <font class="comment">/* Begin and end character positions of token</font>
00145 <font class="comment">                           in input line */</font>
00146 } CCP4PARSERTOKEN;
00147 
00148 <font class="comment">/* CCP4 Parser array</font>
00149 <font class="comment">   Construct to hold the information about a parsed line */</font>
00150 
00151 <font class="keyword">typedef</font> <font class="keyword">struct </font>{
00152   <font class="comment">/* "Public" members */</font>
00153   <font class="keywordtype">char</font>   keyword[5];      <font class="comment">/* Keyword (=token[1].token, uppercased) */</font>
00154   <font class="keywordtype">int</font>    ntokens;         <font class="comment">/* Number of tokens */</font>
00155   CCP4PARSERTOKEN *token; <font class="comment">/* Array of tokens */</font>
00156   <font class="comment">/* "Private" members */</font>
00157   FILE   *fp;             <font class="comment">/* Pointer to an external command file */</font>
00158   <font class="keywordtype">int</font>    maxtokens;       <font class="comment">/* Maximum number of tokens allowed */</font>
00159   <font class="keywordtype">char</font>   *delim;          <font class="comment">/* List of delimiter characters */</font>
00160   <font class="keywordtype">char</font>   *nulldelim;      <font class="comment">/* List of null delimiter characters */</font>
00161   <font class="keywordtype">char</font>   *comment;        <font class="comment">/* List of comment characters */</font>
00162   <font class="keywordtype">double</font> max_exponent;    <font class="comment">/* Largest allowed exponent for numerical tokens */</font>
00163   <font class="keywordtype">double</font> min_exponent;    <font class="comment">/* Smallest allowed exponent for numerical tokens */</font>
00164 } CCP4PARSERARRAY;     
00165 
00166 <font class="comment">/*------------------------------------------------------------------*/</font>
00167 
00168 <font class="comment">/* Function Prototypes */</font>
00169 
00170 <font class="comment">/*------------------------------------------------------------------*/</font>
00171 
00172 <font class="comment">/* Core cparser functions */</font>
00173 
00180 CCP4PARSERARRAY* <a class="code" href="ccp4__parser_8h.html#a3">ccp4_parse_start</a>(<font class="keyword">const</font> <font class="keywordtype">int</font> maxtokens);
00181 
00187 <font class="keywordtype">int</font> <a class="code" href="ccp4__parser_8h.html#a4">ccp4_parse_end</a>(CCP4PARSERARRAY *parsePtr);
00188 
00189 <font class="keywordtype">int</font> ccp4_parse_init_token(<font class="keyword">const</font> CCP4PARSERARRAY *parsePtr, <font class="keyword">const</font> <font class="keywordtype">int</font> itok);
00190 
00191 <font class="keywordtype">int</font> ccp4_parse_delimiters(CCP4PARSERARRAY *parsePtr, <font class="keyword">const</font> <font class="keywordtype">char</font> *delim,
00192                                   <font class="keyword">const</font> <font class="keywordtype">char</font> *nulldelim);
00193 
00194 <font class="keywordtype">int</font> ccp4_parse_comments(CCP4PARSERARRAY *parsePtr, <font class="keyword">const</font> <font class="keywordtype">char</font> *comment_chars);
00195 
00196 <font class="keywordtype">int</font> ccp4_parse_maxmin(CCP4PARSERARRAY *parsePtr, <font class="keyword">const</font> <font class="keywordtype">double</font> max_exponent,
00197                               <font class="keyword">const</font> <font class="keywordtype">double</font> min_exponent);
00198 
00199 <font class="keywordtype">int</font> ccp4_parse_reset(CCP4PARSERARRAY *parsePtr);
00200 
00201 <font class="keywordtype">int</font> ccp4_parse(<font class="keyword">const</font> <font class="keywordtype">char</font> *line, CCP4PARSERARRAY *parser);
00202 
00219 <font class="keywordtype">int</font> <a class="code" href="ccp4__parser_8h.html#a11">ccp4_parser</a>(<font class="keywordtype">char</font> *line, <font class="keyword">const</font> <font class="keywordtype">int</font> n, CCP4PARSERARRAY *parser,
00220                         <font class="keyword">const</font> <font class="keywordtype">int</font> print);
00221 
00222 <font class="comment">/* External utility functions */</font>
00223 
00230 <font class="keywordtype">int</font> <a class="code" href="ccp4__parser_8h.html#a12">ccp4_keymatch</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *keyin1, <font class="keyword">const</font> <font class="keywordtype">char</font> *keyin2);
00231 
00232 <font class="comment">/* Internal utility functions */</font>
00233 
00239 <font class="keywordtype">char</font> *<a class="code" href="ccp4__parser_8h.html#a13">strtoupper</a> (<font class="keywordtype">char</font> *str1, <font class="keyword">const</font> <font class="keywordtype">char</font> *str2);
00240 
00246 <font class="keywordtype">char</font> *<a class="code" href="ccp4__parser_8h.html#a14">strtolower</a> (<font class="keywordtype">char</font> *str1, <font class="keyword">const</font> <font class="keywordtype">char</font> *str2);
00247 
00248 <font class="keywordtype">int</font> strmatch (<font class="keyword">const</font> <font class="keywordtype">char</font> *str1, <font class="keyword">const</font> <font class="keywordtype">char</font> *str2);
00249 
00250 <font class="keywordtype">int</font> charmatch(<font class="keyword">const</font> <font class="keywordtype">char</font> character, <font class="keyword">const</font> <font class="keywordtype">char</font> *charlist);
00251 
00252 <font class="keywordtype">int</font> doublefromstr(<font class="keyword">const</font> <font class="keywordtype">char</font> *str, <font class="keyword">const</font> <font class="keywordtype">double</font> max_exp, <font class="keyword">const</font> <font class="keywordtype">double</font> min_exp,
00253                           <font class="keywordtype">double</font> *valuePtr, <font class="keywordtype">double</font> *intvaluePtr, <font class="keywordtype">int</font> *intdigitsPtr,
00254                           <font class="keywordtype">double</font> *frcvaluePtr, <font class="keywordtype">int</font> *frcdigitsPtr,
00255                           <font class="keywordtype">double</font> *expvaluePtr, <font class="keywordtype">int</font> *expdigitsPtr);
00256 
00263 ccp4_symop <a class="code" href="ccp4__parser_8h.html#a18">symop_to_rotandtrn</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *symchs_begin, <font class="keyword">const</font> <font class="keywordtype">char</font> *symchs_end);
00264 
00274 <font class="keyword">const</font> <font class="keywordtype">char</font> * <a class="code" href="ccp4__parser_8h.html#a19">symop_to_mat4</a>(<font class="keyword">const</font> <font class="keywordtype">char</font> *symchs_begin, <font class="keyword">const</font> <font class="keywordtype">char</font> *symchs_end, <font class="keywordtype">float</font> *rot);
00275 <font class="keywordtype">int</font> symop_to_mat4_err(<font class="keyword">const</font> <font class="keywordtype">char</font> *symop);
00276 ccp4_symop mat4_to_rotandtrn(<font class="keyword">const</font> <font class="keywordtype">float</font> rsm[4][4]);
00277 <font class="comment">/* This is Charles' version of symtr */</font>
00278 <font class="keywordtype">char</font> *rotandtrn_to_symop(<font class="keywordtype">char</font> *symchs_begin, <font class="keywordtype">char</font> *symchs_end, <font class="keyword">const</font> ccp4_symop symop);
00279 <font class="keywordtype">void</font> rotandtrn_to_mat4(<font class="keywordtype">float</font> rsm[4][4], <font class="keyword">const</font> ccp4_symop symop);
00280 
00290 <font class="keywordtype">char</font> *<a class="code" href="ccp4__parser_8h.html#a24">mat4_to_symop</a>(<font class="keywordtype">char</font> *symchs_begin, <font class="keywordtype">char</font> *symchs_end, <font class="keyword">const</font> <font class="keywordtype">float</font> rsm[4][4]);
00291 
00301 <font class="keywordtype">char</font> *<a class="code" href="ccp4__parser_8h.html#a25">mat4_to_recip_symop</a>(<font class="keywordtype">char</font> *symchs_begin, <font class="keywordtype">char</font> *symchs_end, <font class="keyword">const</font> <font class="keywordtype">float</font> rsm[4][4]);
00302 
00303 <font class="preprocessor">#ifdef __cplusplus</font>
00304 <font class="preprocessor"></font>}
00305 }
00306 <font class="preprocessor">#endif</font>
00307 <font class="preprocessor"></font>
00308 <font class="preprocessor">#endif  </font><font class="comment">/* __CCP4_Parser__ */</font>
</pre></div>
</body>
</html>
