<html>
<head><title>CCP4 Program Suite</title></head>
<body>

<!-- ::INDEX_INFO::MAPSLICER::Supported::Plotting / Graphics::interactive section viewer for CCP4 map files:::::::: -->

<H1> MAPSLICER (CCP4: Supported Program)</H1>

<H2> NAME</H2>
<b>mapslicer </b>
- interactive viewer for contoured sections through CCP4 map files.

<H2> SYNOPSIS</H2>
<p>
<b>mapslicer</b>
[ <i>mapfilename</i> ]
</p>

<H2><a name="description">DESCRIPTION</a></H2>

<p>MapSlicer 2.1</p>

<p>
MapSlicer reads in CCP4 format map files and can display contoured
sections though the map along any of the principal axes.
MapSlicer uses code from the CCP4 graphical user interface
<a href="ccp4i.html">ccp4i</a> in addition to a set of custom
Tcl commands (see <a href="ccp4mapwish.html">ccp4mapwish</a>).
</p>

<p>MapSlicer offers the following functions:</p>

<ul>
<li>Read in CCP4 map file, pick any section or stack of sections (``slab'')
on any axis and display contour levels</li>
<li>Shortcuts to Harker sections</li>
<li>Can alter contour levels, section limits and grid</li>
<li>Can alter screen scaling</li>
<li>Can zoom into areas of the display</li>
<li>Can display info on map header and currently displayed section</li>
<li>Displays cursor position in fractional coordinates, and the density at that
point</li>
<li>Print section to a postscript file with user-defined scaling (eg mm per
angstrom)</li>
</ul>

<p>The mapslicer script runs through <a href="ccp4mapwish.html">ccp4mapwish</a>,
which is a customised version of the TCL/Tk interpreter <tt>wish</tt>.

<H2><a name="usage">USAGE</a></H2>

<p>Most of MapSlicer's functionality can be accessed quickly through the controls on
the left-hand side of the window. Other options are available through menus at the
top of the main window.</p>

<H3>File menu:</H3>

<dl>
<dt>Open new map file
    <dd>Select a new map to view. Any existing map currently being viewed
    will be overwritten in the viewer's memory.
<dt>Save section
    <dd>Save the current section to a postscript file.
<dt>Print
    <dd>Print the current section to a postscript file.
<dt>Exit
    <dd>Close the viewer.
</dl>

<H3>Section menu:</H3>

<dl>
<dt>Section limits
    <dd>Allows you to change properties of the grid, the extent of
    the section displayed, and the orientation of the view.
<dt>Contour levels
    <dd>Allows you to change the contour levels displayed. This is
    based on the old NPO keywords.
</dl>

<H3>Info menu:</H3>

<dl>
<dt>About map ...
    <dd>Displays a window with information about the current map.
<dt>About section ...
    <dd>Displays a window with information about the current section,
    including the contour levels.
<dt>About MapSlicer ...
    <dd>Starts a hypertext viewer to display this file.
</dl>

<H3>MapSlicer Modes</H3>

<p>MapSlicer operates in four distinct modes, which are selected via
the <b>Mode</b> menu on the left-hand side of the screen. Depending on
the mode, different controls will be become visible:

<dl>
<dt>Section mode
    <dd>MapSlicer displays a single section at a time. The current
    section can be changed by editing the section number in the entry
    box, or by clicking on the arrows to move up or down by one section.
    <br>
    The current axis can be changed by selecting the new axis from
    the menu.
    <br>
    In this mode the option to display a "greyscale" view is also
    available. If this option is selected then the greyscale is
    superimposed beneath the contours - see the section on
    <a href="#greyscale">greyscale views</a> for more information.
<dt>Slab mode
    <dd>Similar to Section mode, except that the display shows a stack
    of sections superimposed one on top of the other. The slab is defined
    by a starting section, a depth (number of sections between the start
    and end) and a step size (specifying how many sections in the slab
    will actually be drawn).
    <br>
    Any of these attributes can be edited directly to change the current
    slab display. Alternatively the arrows can be used to move the start
    position up or down by one section. 
    <br>
    The current axis can be changed by selecting the new axis from
    the menu.
<dt>Harker mode
    <dd>This requires that the Harker spacegroup be specified. A menu will
    then list the possible Harker sections for that spacegroup, and
    selecting a particular menu entry will jump directly to the appropriate
    axis and section.
    <br>
    If the selected Harker section is not in the current map then a warning
    will be displayed. If no Harker sections are available then the menu
    will display "None".
<dt>Mask mode
    <dd>This is the default mode if a CCP4 mask file is loaded. The
    display shows a black ("zeroes") and white ("ones") view.
    <br>
    (This is essentially a contourless greyscale view of the map.)
</dl>

<H3>Other controls</H3>

<p>The remaining controls are not dependent on the mode

<dl>
<dt>Scale
    <dd>Specifies how large each &Aring;ngstrom is shown on the display,
    in either mm or screen pixels. The scale is a real number for either
    units, and can be edited directly in the display.
<dt>AutoScale
    <dd>Resets the view to show the whole section at a scale of 2mm
    per &Aring;ngstrom.
<dt>Undo Zoom
    <dd>Restores the view to that prior to the last zoom operation that
    was performed.
</dl>

<H3>Zoom Facility</H3>

<p>The Zoom facility allows the user to select a smaller area of the
current display and rescales to show that area only.</p>

<p>The Zoom is enabled by click-and-holding the left mouse button (to
set one corner of the zoom area), dragging the mouse pulls out a box
which defines the zoom area, releasing the mouse button then performs
the zoom operation.</p>

<p>The scale will be reset automatically so that the screen area
occupied by the new view is roughly the same as before the zoom. This
is calculated based on area, and seems to work best for roughly square
zoom areas.</p>

<p>A zoom operation can be reversed using the <b>Undo Zoom</b> button.</p>

<a name="greyscale"></a>
<H3>Greyscale Views</H3>

<p>The greyscale view sets tones of grey for each cell in the visible
map section, based on the value of the map at the grid point at the
centre of the cell, scaled linearly relative to the minimum and maximum
values within the current view. Darker areas have lower density values
than lighter areas.</p>

<p>This means that features in the greyscale view may appear to be
"flattened out" for sections which are dominated by only a few
disproportionately high peaks (such as sections in a patterson map
which include the origin peak). This can be counteracted to some
degree by using the zoom function to "crop out" the high peaks from
the section being viewed.</p>

<p>Comments and feedback on the greyscale view are welcome.</p>

<H2> AUTHOR</H2>
<p>
Peter Briggs
</p>
</body></html>
