<html>
<head><title>CCP4 Program Suite</title></head>
<body>

<!-- ::INDEX_INFO::HKLVIEW::Supported::Plotting / Graphics::displays zones of reciprocal space as pseudo-precession images::X-windows program:::::: -->

<H1> HKLVIEW (CCP4: Supported Program)</H1>
<H2> NAME</H2>
<b>hklview </b>
- X-windows program, displays zones of reciprocal space as pseudo-precession images.
<H2> SYNOPSIS</H2>
<b>hklview</b> [options]
[
<i>foo_in.mtz </i>
]
<H2><A NAME="description"></A> DESCRIPTION</H2>
This program displays zones of reciprocal space as pseudo-precession
images, on an X-windows terminal, using the xdl_view
subroutine library written by John Campbell at Daresbury Laboratory.
Spots are represented as squares of size & darkness which depend on
intensity (or alternatively amplitude). The program reads an MTZ file
containing either:
<dl COMPACT>
<dt>(a)<dd>unmerged intensities, in which case the spots are displayed with
their original measured indices (if there are redundant observations,
only the last will be drawn). Partially recorded reflections may be
summed or ignored.
</dl>
<P> 
or
<dl COMPACT>
<dt>(b)<dd>merged data (usually amplitudes F), in which case the reflections
are expanded by the crystallographic symmetry to fill the sphere, <EM>i.e.</EM>
the whole zone will be displayed.
</dl>
<P> 
A zone is defined by a vector zvec and a level number zlev, such
that the condition for a reflection h lying in the zone is that 
h . zvec = zlev<BR>
For example, zones (hk0), (h0l) &amp; (0kl) are defined by zlev = 0, zvec =
(001), (010), (100)
<P>
Command line options:
<center><table>
      <TR><TD>-d &lt;resolution&gt;</TD><TD>set resolution limit in A</TD></TR>
      <TR><TD>-c &lt;column label&gt;</TD><TD>set column label</TD></TR>
      <TR><TD>-r[awname]</TD><TD>don't add .mtz to filename</TD></TR>
</table></center>
</P>
<H2><A NAME="files"></A> INPUT FILE</H2>
This may be assigned from the menu option hkl file, or by
giving the file name on the command line (<EM>i.e.</EM> hklview file_name). In
either case, the default extension .mtz will be added if absent,
unless the command line option -rawname [-r is sufficient] is
given.
<H2><A NAME="function"></A> PROGRAM FUNCTION</H2>
The display window is divided into 4 main areas: <A HREF="#display_parameters">Display Parameter
area</A>, <A HREF="#output">Output area</A>, <A HREF="#main">Main menu</A>, <A HREF="#image_display">Image display area</A>.
<P> 
The left mouse button is the main pointer, the middle button
is used on the image area to control the magnify window, the right
button for sub-menu options in the image area.
<dl>
<dt>
<A NAME="display_parameters"></A>Display parameter area
<dd>
This allows a number of parameters affecting the display &amp;
other options to be changed. Yes/No toggles can be changed by clicking
the left mouse button on the Yes/No button. Numbers &amp; strings can be
changed by clicking on the number with the left button, then typing
the number, terminated by &lt;cr&gt;. See also <A HREF="#details_display_parameters">more
detailed description below</A>.
<dt>
<A NAME="output"></A>Output area
<dd>
This area reports the results of clicking on the image, etc.
No input is accepted. See also <A HREF="#details_output">more detailed description
below</A>.
<dt>
<A NAME="main"></A>Main menu
<dd>
Click left button to select an option. See also <A HREF="#details_main">more detailed
description below</A>.
<dt>
<A NAME="image_display"></A>Image display area
<dd>
In the window area, the left mouse button can be used to
select a point or a rectangle by dragging. Clicking on a spot will
give the indices hkl, &amp; the intensity (or amplitude) in the Output
area. Selected areas may be zoomed by (a) clicking on the Zoom button at the right-hand side
of the image display header, then selecting a rectangle, or (b)
selecting a rectangle then clicking on the menu option Zoom; click
Zoom again to restore the full image.
<p>
The middle mouse button controls the magnify window (on the left of the image display header).
Clicking the middle button on the magnify window toggles a double
size display. Clicking the middle button on the image display freezes
the magnify window, allowing pixels in the magnify window to be picked
(but not rectangles).
<p>
The top right panel of the image display header contains:-
<ol> 
<li>Min &amp; Max image values for the grey level scaling
(equivalent to Scale low &amp; high in the parameter area, but less
permanent)
<li>Cursor position in pixels. In zoomed images, this is the
pixel position in the ZOOMED image, not in the whole image.
<li>Overlay On/Off/Offset menu, toggles display of circle and
spot overlays (right button to select)
<li>Contrast slider: controls display contrast (left button)
<li>Colour table selection: probably only Black on white &amp;
White on black are useful<BR>(<EM>N.B.</EM> &quot;Yellow if &gt;Max&quot; option makes pixels
yellow if they are greater than scale-high (=Max) value)
<li>Mag menu: controls magnification in magnify window
<li>PS button: sends image to a Postscript file (after a
little dialogue)
<li>Zoom button: click then select rectangle to zoom. Click
twice to restore to original
</ol>
</dl>

<H3> DETAILS</H3>
<H4><A NAME="details_display_parameters"></A>Display parameters</H4>
<OL>
<li><A NAME="scale_low"></A> Scale low, high: define scaling range, <EM>i.e.</EM> the values of an
image pixel to be displayed as white or black. The first image
displayed will be scaled automatically, and the range may also be
recalculated with the <A HREF="#rescale_image">Rescale image</A> option in the menu, but you may
wish to change this. These numbers are exactly equivalent to the
Min/Max numbers on the image panel, but numbers set here will carry
over to all images. Use <A HREF="#redraw_image">Redraw image</A> option to redisplay image with
altered scaling.
<li><A NAME="pick_area"></A> Pick area: controls number of pixels displayed by <A HREF="#pick">Pick</A>
<li><A NAME="outer_circle"></A> Outer circle: define resolution (&#197;) for the outer circle
drawn by the <A HREF="#circles">Circles</A> option. Default to edge of zone. The <A HREF="#circle_resolution">actual
resolutions of the circles</A> are given in the output area.
<li><A NAME="resolution"></A> Resolution: set outer resolution limit (&#197;) for storing
reflections from the hkl file. If a file is open, it will be reread, &amp;
the reflections stored.
<li><A NAME="column_label"></A> Column label: specify the column label for I or F in the
file. If this is blank (default), then the first column of type J or F
in the file will be used.
<li><A NAME="sum_partials"></A> Sum partials: only relevant if the hkl file includes
partially recorded reflections. Toggle to sum partials or to omit
partials (default sum).
</OL>

<H4><A NAME="details_output"></A>Output</H4>
<OL>
<li><A NAME="pixel"></A> Pixel: last pixel hit (Yms, Zms) or 1st corner of rectangle
<li><A NAME="resolution"></A> Resolution: of last pixel hit (in Angstrom)
<li><A NAME="spacing"></A> Spacing: result of <A HREF="#measure">Measure</A> option
<li><A NAME="zoom_factor"></A> Zoom factor: if <A HREF="#zoom">Zoom</A> option used
<li><A NAME="circle_resolution"></A> Circle resolution: resolution of circles drawn by
<A HREF="#circles">Circles</A> option
<li><A NAME="output_zone_normal"></A> Zone normal: vector defining zone direction, <EM>e.g.</EM> 0 0 1
defines zone hkN, where N is the zone level
<li><A NAME="zone_level"></A> Zone level: zone level number
<li><A NAME="hkl"></A> hkl: indices of last hit reflection
<li><A NAME="F_I"></A> F|I sd: stored value of F or I &amp; standard deviation, for
last hit reflection.
<li><A NAME="batch_number"></A> Batch number, full|partial flag: only for unmerged data
<li><A NAME="intensity_display"></A> Intensity display | Amplitude displayed: intensity is
displayed by default (even if file contains F), but <A HREF="#display_F">amplitude (F)</A> may
be selected from menu
<li><A NAME="original_indices"></A> Original indices | Symmetry applied: for unmerged files
(M/ISYM column present in file), reflections are drawn according to
their original indices. For merged data files, the spacegroup symmetry
is used to generate the whole zone.
</OL>

<H4><A NAME="details_main"></A>Main menu</H4>
<OL>
<li><A NAME="hkl_file"></A> hkl file: give name of hkl file to be read
<li><A NAME="reread_file"></A> Reread file: read hkl file again (<EM>e.g.</EM> after changing column
label assignment)
<li><A NAME="display_F"></A> Display F | I: toggle display of spots graded by intensity
or amplitude F. Intensity is displayed by default (even if file
contains F). Note that the display will not change until a new zone is
selected. 
<li><A NAME="zone_normal"></A> Zone normal: define zone normal vector and level, and draw
it. A zone is defined by a vector zvec and a level number zlev, such
that the condition for a reflection h lying in the zone is that<br>
h . zvec = zlev
<li><A NAME="0kl"></A> 0kl, h0l, hk0, hhl: choose &amp; draw appropriate zone
<li><A NAME="Nkl"></A> Nkl, hNl, hkN: set <A HREF="#output_zone_normal">zone level</A>, choose &amp; draw appropriate zone
<li><A NAME="next_level"></A> Next level, Previous level: increment or decrement zone
level, then draw zone. Leave zone normal unchanged.
<li><A NAME="level_number"></A> Level number: set zone level, then draw zone. Leave zone
normal unchanged.
<li><A NAME="redraw_image"></A> Redraw image: redraw without any overlays
<li><A NAME="rescale_image"></A> Rescale image: reset the scale low &amp; high, &amp; redraw image
<li><A NAME="pick"></A> Pick: toggle display of figure field around picked point on image.
<li><A NAME="measure"></A> Measure: toggle measurement of reciprocal lattice spacing. Pick two
spots on a reciprocal lattice row (left button), then type number of orders, &amp;
the <A HREF="#spacing">lattice spacing</A> is output in the Output area. Beware skew cells, this gives
you 1/a* etc, not a!
<li><A NAME="circles"></A> Circles: toggle display of resolution circles. The
<A HREF="#outer_circle">resolution of the outer circle</A> is defined in the parameter table, the
<A HREF="#circle_resolution">resolutions of all the circles</A> is given in the output area.
<li><A NAME="axes_off"></A> Axes off | on: click to remove axes &amp; legend, click again to
put them back
<li><A NAME="zoom"></A> Zoom: zoom a part of the image. Select an area by dragging
a rectangle on the image (left button), then click Zoom. A square
area enclosing the selected rectangle will be displayed. Zooming may
be repeated. To restore full image, click Zoom when no rectangle is
selected. Note that zoom does not recreate the zone image, but just
magnifies a part of it.
<li><A NAME="exit"></A> Exit: exit program
</OL>

<H2> SEE ALSO</H2>
<a href="hklplot.html">hklplot</a>.
<H2> AUTHOR</H2>
Phil Evans, MRC LMB, Cambridge
</body></html>
