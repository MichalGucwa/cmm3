<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.05C-SGI [en] (X11; I; IRIX 6.5 IP22) [Netscape]">
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000EE" VLINK="#551A8B" ALINK="#FF0000">
<!-- ::INDEX_INFO::ccp4_interface_installation::Basic::::Installation of CCP4 Interface :::::::: -->
<DIV ALIGN=right>
<H1>
<IMG SRC="ccp4i/help/images/weblogo263.gif" HEIGHT=120 WIDTH=245></H1></DIV>

<H1>
Installation of Version 2.1.0 of CCP4Interface</H1>
<B>Released with CCP4 Version 6.3</B>

<P>See also the <A HREF="../INSTALL">INSTALL file</A> for advice
on installing the main CCP4 suite.</p>

<H3>
Contents</H3>

<DT>
<A HREF="#what_is_tcl">What is Tcl/Tk/BLT?</A></DT>

<DT>
<A HREF="#do_you_need">Do You Need to Install a New Tcl/Tk?</A></DT>

<DT>
<A HREF="#where_to_get_it">Downloading Tcl/Tk/BLT</A></DT>

<DT>
<A HREF="#installing the interface">Installing CCP4i</A></DT>

<DT>
<A HREF="#configure">Configuring CCP4i to Use Local Resources</A></DT>

<DT>
<A HREF="#temporary">The TEMPORARY Directory</A></DT>

<DT>
<A HREF="#non-CCP4">Programs not Distributed by CCP4</A></DT>

<DT>
<A HREF="#problems">Problems?</A></DT>

<BR>See also
<BR><A HREF="http://www.ccp4.ac.uk/ccp4i_main.html">CCP4i Main Page</A>
<BR><A HREF="http://www.ccp4.ac.uk/ccp4i_main.html#problems">Problems with CCP4i</A>
<BR><A HREF="http://www.ccp4.ac.uk/ccp4i/install_tcltkblt.html">Problems
installing Tcl/Tk/BLT</A>.
<H3>
<A NAME="what_is_tcl"></A>What is Tcl/Tk and BLT?</H3>
Tcl and Tk are two separate but very closely linked packages - Tcl is a
scripting language like Perl and Tk is X-based 2D graphics. Both packages
are written in C and require compiling and building. A combined version
of the two packages is built into a program called <B>wish</B>. A Tcl program
without the graphics is called <B>tclsh</B>.

<P>Wish is an interpreter which will process command line input or scripts.
The CCP4 Interface is a series of Tcl/Tk scripts. Tcl/Tk scripts can have
command structure and procedures and can be built up like Fortran or C
programs but they do not need to be compiled - they are interpreted at
run time.

<P>There are several packages which provide add-on features to Tcl/Tk -
the interface uses the <B>BLT</B> package which provides graph plotting
in the loggraph utility. The combined Tcl/Tk/BLT program is called <B>bltwish</B>.
<H3>
<A NAME="do_you_need"></A>Do You Need to Install a New Tcl/Tk?</H3>
<B>Tcl8.3/Tk8.3/BLT2.4</B> or later are the recommended versions. The interface
may run under earlier versions however it is possible that you will experience
problems.

<P>You may already have Tcl/Tk installed on your machine. At least some flavours of Linux come with Tcl/Tk installed.

<p>NB: The pre-built CCP4 core packages for Linux, Mac and Windows now include Tcl/Tk, so it is normally not necessary
to install them.</p>

<H5> Testing Tcl/Tk installed version</H5>
You can find out which version is installed by typing:
<PRE><B>> bltwish
% puts $tk_version
% exit</B></PRE>

<H3>
<A NAME="where_to_get_it"></A>Downloading Tcl/Tk/BLT</H3>
You can download Tcl/Tk/BLT from the CCP4 FTP site, which carries the
source code as well precompiled executables for a number of major
platforms.

<p>Go to <a href="ftp://ftp.ccp4.ac.uk/tcltk/README.html">
ftp://ftp.ccp4.ac.uk/tcltk/README.html</a> to access the files, and
to find more detailed instructions on how to install them.</p>

<H3>
<A NAME="installing the interface"></A>Installing the CCP4Interface</H3>

<H4>
<A NAME="ccp4_setup"></A>The CCP4 Setup File</H4>
Once you have installed CCP4 you will have the interface in the directory
$CCP4/ccp4i - this is referred to by the environment variable CCP4I_TOP
which is set in the ccp4.setup script. Also set in the ccp4.setup script
is the environment variable CCP4I_TCLTK which should refer to the directory
containing the wish, tclsh and bltwish executables.
<H4>
<A NAME="tcl versions"></A>Finding the Right tclsh/wish/bltwish</H4>
There are three scripts in <B>$CCP4I_TOP/ccp4i/bin</B> which are run to
start up the interface. The first thing these scripts do is <TT>exec</TT>
one of the Tcl/Tk/Blt executables which it expects to find in the directory
$CCP4I_TCLTK (which is defined in the setup file as described <A HREF="#ccp4_setup">above</A>).
<TABLE>
<TR>
<TD><B>$CCP4I_TOP/bin/ccp4i</B></TD>

<TD>uses bltwish</TD>
</TR>

<TR>
<TD><B>$CCP4I_TOP/bin/ccp4ish</B></TD>

<TD>uses tclsh8.* (8.3 or better required)</TD>
</TR>

<TR>
<TD><B>$CCP4I_TOP/bin/loggraph</B></TD>

<TD>uses bltwish</TD>
</TR>
</TABLE>
If you do not have all the executables in the same place or the specified
version of wish/tclsh/blt you will need to edit (some of) these scripts.

<P>After that the commands to run CCP4i are:
<PRE><B>> source $CCP4/include/ccp4.setup
> ccp4i [-help]</B></PRE>
Once you have CCP4i running you can use the graphical interface to use
the configuration options:
<H3>
<A NAME="configure"></A>Configuring CCP4i to Use Local Resources</H3>
The interface needs access to local resources (such as a web browser to
display help text) and must be configured so that it can find them. Once
the basic CCP4i is installed this can be done through an interface:
<PRE><B>> ccp4i -c&lt;onfigure></B></PRE>
The Help button on the top right of the window will bring up documentation
in your web browser if (Catch 22!) CCP4i is configured correctly to find
your browser. If not then point your browser at:

<P><tt>$CCP4I_TOP/help/general/configure.html</tt> (equivalent to
<a href="../ccp4i/help/general/configure.html">$CCP4/ccp4i/help/general/configure.html</a>).
<H3>
<A NAME="temporary"></A>The TEMPORARY Directory</H3>
CCP4i has the idea of a TEMPORARY directory which by default is the same
as $CCP4_SCR. CCP4i scripts put large output files such as map files in
the TEMPORARY directory. If you run jobs remotely or in batch from CCP4i
and the $CCP4_SCR is local to the remote machine (<I>e.g.</I> /usr/tmp
or /tmp) then it may be difficult for users to access these files. In this
case you will need to set TEMPORARY to something such as $HOME/temporary.
You set the default definition of TEMORARY for all users by editing the
file $CCP4I_TOP/etc/directories.def and changing the definition of the
parameter DEF_DIR_PATH,1 (see the file for example). You may also need
to warn users to create the appropriate directory. Users can reset the
definition using the <I>Directories and ProjectDir</I> option in CCP4i.

<!--<H3><A NAME="convert_MTZ"></A>Converting MTZ File for Tutorial</H3>
The CCP4i tutorials expect an MTZ file $CCP4I_TOP/test_data/rnase_tutorial.mtz.
The required data is actually distributed as an ascii file $CCP4I_TOP/test_data/rnase_tutorial.na4
(to avoid problems with different binary formats on different operating
systems).&nbsp; This file can be converted to an MTZ:

<P><B>> source $CCP4/include/ccp4.setup</B>&nbsp; (or whatever command
to setup your usually CCP4 environment).
<BR><B>> na4tomtz hklin $CCP4I_TOP/test_data/rnase_tutorial.na4 hklout
$CCP4I_TOP/test_data/rnase_tutorial.mtz</B>-->
<H3>
<A NAME="non-CCP4"></A>Programs not Distributed by CCP4</H3>
CCP4i uses non-CCP4 programs to convert map file formats (mapman for O
and mbkall for Quanta) but if you have the graphics program installed then
you should have the conversion program available already.

<P>In addition CCP4i has interfaces to some non-CCP4 programs, and
some non-CCP4 software packages come with their own CCP4i interfaces.
A list of these packages can be found in the <a href="../ccp4i/help/general/additional.html">Additional Programs</a> section of the CCP4i documentation.</P>

<H3>
<A NAME="problems"></A>Problems?</H3>
Please contact us if you have any problems: <B><I><A HREF="mailto:ccp4@ccp4.ac.uk">ccp4@ccp4.ac.uk</A></I></B>.
</BODY>
</HTML>
